!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i,s,a=function(){function e(){var e=this;this.animations=[],this.updates=[],this.resize=function(){console.log("canvas resizing"),e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight},this.isRunning=!1,this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)},this.addView=function(t){e.addAnimatable(t),t.width=e.width,t.height=e.height},this.removeView=function(t){e.removeAnimatable(t)},this.fps=40,this.fpsInterval=1e3/this.fps,this.animate=function(){e.isRunning&&requestAnimationFrame(e.animate);var t=Date.now(),n=t-e.lastFrameTime;if(n>e.fpsInterval){e.lastFrameTime=t;for(var i=n/1e3,s=0,a=e.updates;s<a.length;s++){(0,a[s])(i)}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var o=0,r=e.animations;o<r.length;o++){(0,r[o])(e.ctx,e.canvas.width,e.canvas.height)}}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),e.createInBody=function(){document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var t=document.createElement("canvas");document.body.appendChild(t),t.style.width="100%",t.style.height="100%";var n=new e;return n.canvas=t,n.ctx=t.getContext("2d"),document.addEventListener("keyup",function(e){80==e.keyCode&&n.playPause(),console.log(e.keyCode)}),n.startAnimation(),n.resize(),window.addEventListener("resize",n.resize),n},e.prototype.startAnimation=function(){console.log("start animation"),this.isRunning=!0,this.lastFrameTime=Date.now(),this.animate()},e.prototype.stopAnimation=function(){console.log("stop animation"),this.isRunning=!1},e.prototype.playPause=function(){this.isRunning?this.stopAnimation():this.startAnimation()},e}(),o=function(){return function(){var e=this;this.animations=[],this.updates=[],this.isVisible=!0,this.update=function(t){if(e.isVisible)for(var n=0,i=e.updates;n<i.length;n++)(0,i[n])(t)},this.draw=function(t,n,i){if(e.isVisible)for(var s=0,a=e.animations;s<a.length;s++)(0,a[s])(t,n,i)},this.show=function(){e.isVisible=!0},this.hide=function(){e.isVisible=!1},this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)}}}();!function(e){e.start="start",e.left="left",e.up="up",e.right="right",e.down="down"}(i||(i={})),function(e){e.keyboard="keyboard",e.gamepad="gamepad"}(s||(s={}));var r=function(){return function(){var e=this;this.listeners=[],this.addEventListener=function(t){if(!t||e.listeners.indexOf(t)>=0)throw"listener already added";e.listeners.push(t)},this.dispatchEvent=function(t){for(var n=0;n<e.listeners.length;n++)(0,e.listeners[n])(t)},this.removeEventListener=function(t){if(!t||e.listeners.indexOf(t)<0)throw"listener not found";e.listeners.splice(e.listeners.indexOf(t),1)}}}(),d=function(){return function(){var e=this;this.listeners=[],this.addEventListener=function(t){if(!t||e.listeners.indexOf(t)>=0)throw"listener already added";e.listeners.push(t)},this.dispatchEvent=function(t,n){for(var i=0;i<e.listeners.length;i++)(0,e.listeners[i])(t,n)},this.removeEventListener=function(t){if(!t||e.listeners.indexOf(t)<0)throw"listener not found";e.listeners.splice(e.listeners.indexOf(t),1)}}}(),c=function(){return function(e,t,n,a,o,r){var c=this;this.name=e,this.type=s.keyboard,this.signal=new d,this.xAxes=0,this.yAxes=0,this.start=!1,document.addEventListener("keydown",function(e){e.keyCode==n&&(c.xAxes=-1,c.signal.dispatchEvent(c,i.left)),e.keyCode==t&&(c.yAxes=-1,c.signal.dispatchEvent(c,i.up)),e.keyCode==o&&(c.xAxes=1,c.signal.dispatchEvent(c,i.right)),e.keyCode==a&&(c.yAxes=1,c.signal.dispatchEvent(c,i.down)),13==e.keyCode&&(c.start=!0,c.signal.dispatchEvent(c,i.start)),e.keyCode==r&&(c.a=!0)}),document.addEventListener("keyup",function(e){e.keyCode==n&&(c.xAxes=-1)&&(c.xAxes=0),e.keyCode==t&&(c.yAxes=-1)&&(c.yAxes=0),e.keyCode==o&&(c.xAxes=1)&&(c.xAxes=0),e.keyCode==a&&(c.yAxes=1)&&(c.yAxes=0),13==e.keyCode&&(c.start=!1),e.keyCode==r&&(c.a=!1)})}}(),l=function(){function e(){var e=this;this.gamepads=[],this.scangamepads=function(){console.log("scanning gamepads");for(var t=navigator.getGamepads?navigator.getGamepads():[],n=0;n<t.length;n++)t[n]&&(console.log("scanned gamepad: "+t[n].index+"/"+t[n].id),!(t[n].index in e.gamepads)&&t[n].buttons.length>=16&&(e.gamepads[t[n].index]=t[n],e.scannedGamepad.dispatchEvent(t[n])))},this.scannedGamepad=new r,this.reset()}return e.prototype.start=function(){this.gamepadScanner=setInterval(this.scangamepads,500)},e.prototype.stop=function(){clearInterval(this.gamepadScanner)},e.prototype.reset=function(){this.gamepads=[]},e}(),u=function(){function e(e,t){var n=this;this.name=e,this.index=t,this.timeout=.5,this.signalingTimers={},this.signalListener=function(){requestAnimationFrame(n.signalListener);var e=Date.now();n.checkSignal(n.start,i.start,e),n.checkSignal(n.yAxes<-.3,i.up,e),n.checkSignal(n.yAxes>.3,i.down,e),n.checkSignal(n.xAxes<-.3,i.left,e),n.checkSignal(n.xAxes>.3,i.right,e)},this.checkSignal=function(e,t,i){e?n.signalingTimers[t]?(i-n.signalingTimers[t])/1e3>=n.timeout&&n.signal.dispatchEvent(n,t):(n.signalingTimers[t]=Date.now(),n.signal.dispatchEvent(n,t)):n.signalingTimers[t]=void 0},this.signal=new d,this.type=s.gamepad}return Object.defineProperty(e.prototype,"xAxes",{get:function(){return navigator.getGamepads()[this.index].axes[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxes",{get:function(){return navigator.getGamepads()[this.index].axes[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return navigator.getGamepads()[this.index].buttons[9].pressed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return navigator.getGamepads()[this.index].buttons[0].pressed},enumerable:!0,configurable:!0}),e.prototype.enableSignals=function(){this.signalListener()},e}(),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),h=function(e){function t(){var t=e.call(this)||this;t.options=[],t.controllers=[],t.drawOptions=function(e,n,i){for(var s=i/2-32*t.options.length/2,a=0;a<t.options.length;a++){var o=t.options[a];e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="22px sans-serif";var r=s+5+32*a;e.fillText(o,n/2,r),a===t.selectedOption&&e.strokeRect(n/2-e.measureText(o).width/2-5,r-11-5,e.measureText(o).width+10,32)}},t.drawControllers=function(e,n,i){for(var a=n/2-(5+35*t.controllers.length)/2,o=0;o<t.controllers.length;o++){var r=a+5+35*o;switch(t.controllers[o].type){case s.gamepad:e.fillStyle="red",e.fillRect(r,i/4,20,20);break;case s.keyboard:e.fillStyle="green",e.fillRect(r,i/4,20,20)}}},t.addController=function(e){e.type==s.gamepad&&e.enableSignals(),e.signal.addEventListener(t.controllerSignal)},t.controllerSignal=function(e,n){if(console.log("signal: "+n),n==i.start)t.controllers.indexOf(e)>=0?t.controllers.splice(t.controllers.indexOf(e),1):t.controllers.push(e);else if(t.controllers.length>0&&t.controllers[0]==e)switch(n){case i.down:t.selectedOption++,t.selectedOption>=t.options.length&&(t.selectedOption=0);break;case i.up:t.selectedOption--,t.selectedOption<0&&(t.selectedOption=t.options.length-1)}},t.options=["Start Game","Controls"],t.selectedOption=0,t.addAnimation(t.drawOptions),t.addAnimation(t.drawControllers);var n=new l;n.scannedGamepad.addEventListener(function(e){t.addController(new u(e.index.toString(),e.index))}),n.start();var a=new c("arrows",38,37,40,39,187);return t.addController(a),t}return p(t,e),t}(o),f=function(){function e(){}return e.prototype.run=function(){this.animation=a.createInBody();var e=new h;this.animation.addView(e)},e}();document.addEventListener("DOMContentLoaded",function(){(new f).run()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy9hbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy9jb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9lbmMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2VFdmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2tleWJvYXJkQ29udHJvbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy9nYW1lcGFkU2Nhbm5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2dhbWVwYWRDb250cm9scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbk1lbnVWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU2lnbmFscyIsIkNvbnRyb2xsZXJUeXBlIiwiQW5pbWF0aW9uIiwiX3RoaXMiLCJ0aGlzIiwiYW5pbWF0aW9ucyIsInVwZGF0ZXMiLCJyZXNpemUiLCJjb25zb2xlIiwibG9nIiwiY2FudmFzIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsImlzUnVubmluZyIsImFkZEFuaW1hdGlvbiIsImZ1bmMiLCJwdXNoIiwicmVtb3ZlQW5pbWF0aW9uIiwic3BsaWNlIiwiaW5kZXhPZiIsImFkZFVwZGF0ZSIsInJlbW92ZVVwZGF0ZSIsImFkZEFuaW1hdGFibGUiLCJhbmltYXRhYmxlIiwidXBkYXRlIiwiZHJhdyIsInJlbW92ZUFuaW1hdGFibGUiLCJhZGRWaWV3IiwidmlldyIsInJlbW92ZVZpZXciLCJmcHMiLCJmcHNJbnRlcnZhbCIsImFuaW1hdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJub3ciLCJEYXRlIiwiZWxhcHNlZCIsImxhc3RGcmFtZVRpbWUiLCJ0aW1lRGlmZiIsIl9pIiwiX2EiLCJsZW5ndGgiLCJjdHgiLCJjbGVhclJlY3QiLCJfYiIsIl9jIiwiY3JlYXRlSW5Cb2R5IiwiZG9jdW1lbnQiLCJib2R5IiwicGFyZW50RWxlbWVudCIsInN0eWxlIiwibWFyZ2luIiwib3ZlcmZsb3ciLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJhbmltYXRpb24iLCJnZXRDb250ZXh0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Q29kZSIsInBsYXlQYXVzZSIsInN0YXJ0QW5pbWF0aW9uIiwid2luZG93Iiwic3RvcEFuaW1hdGlvbiIsIlZpZXciLCJpc1Zpc2libGUiLCJzaG93IiwiaGlkZSIsIkVFdmVudFQiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJhcmciLCJldmVudF8xIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkVFdmVudFRUIiwiYXJnMSIsImFyZzIiLCJldmVudF8yIiwia2V5Ym9hcmRDb250cm9sc19LZXlib2FyZENvbnRyb2xzIiwidXBLZXkiLCJsZWZ0S2V5IiwiZG93bktleSIsInJpZ2h0S2V5IiwiYSIsInR5cGUiLCJrZXlib2FyZCIsInNpZ25hbCIsInhBeGVzIiwieUF4ZXMiLCJzdGFydCIsImxlZnQiLCJ1cCIsInJpZ2h0IiwiZG93biIsImdhbWVwYWRTY2FubmVyX0dhbWVwYWRTY2FubmVyIiwiR2FtZXBhZFNjYW5uZXIiLCJnYW1lcGFkcyIsInNjYW5nYW1lcGFkcyIsIm5hdmlnYXRvciIsImdldEdhbWVwYWRzIiwiaW5kZXgiLCJpZCIsImJ1dHRvbnMiLCJzY2FubmVkR2FtZXBhZCIsInJlc2V0IiwiZ2FtZXBhZFNjYW5uZXIiLCJzZXRJbnRlcnZhbCIsInN0b3AiLCJjbGVhckludGVydmFsIiwiZ2FtZXBhZENvbnRyb2xzX0dhbWVwYWRDb250cm9scyIsIkdhbWVwYWRDb250cm9scyIsInRpbWVvdXQiLCJzaWduYWxpbmdUaW1lcnMiLCJzaWduYWxMaXN0ZW5lciIsImNoZWNrU2lnbmFsIiwiaXNQcmVzc2VkIiwidW5kZWZpbmVkIiwiZ2FtZXBhZCIsImF4ZXMiLCJwcmVzc2VkIiwiZW5hYmxlU2lnbmFscyIsIm1haW5NZW51Vmlld19NYWluTWVudVZpZXciLCJfc3VwZXIiLCJNYWluTWVudVZpZXciLCJvcHRpb25zIiwiY29udHJvbGxlcnMiLCJkcmF3T3B0aW9ucyIsInN0YXJ0SGVpZ2h0Iiwib3B0aW9uIiwiZmlsbFN0eWxlIiwidGV4dEFsaWduIiwidGV4dEJhc2VsaW5lIiwiZm9udCIsIm9wdGlvbkhlaWdodCIsImZpbGxUZXh0Iiwic2VsZWN0ZWRPcHRpb24iLCJzdHJva2VSZWN0IiwibWVhc3VyZVRleHQiLCJmb250U2l6ZSIsImRyYXdDb250cm9sbGVycyIsInN0YXJ0WCIsIngiLCJmaWxsUmVjdCIsImFkZENvbnRyb2xsZXIiLCJjb250cm9sbGVyIiwiY29udHJvbGxlclNpZ25hbCIsInNlbmRlciIsInRvU3RyaW5nIiwiX19leHRlbmRzIiwiYXBwX0FwcCIsIkFwcCIsInJ1biIsIm1haW5NZW51Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxF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R0NBbENzRixFQUFBLG9CQUFBQyxLQXNCQSxPQWpCV0EsRUFBQTdKLFVBQUE4SixJQUFQLFdBQ0l0SixLQUFLcUQsVUFBWXZELEVBQVU4QyxlQUMzQixJQUFJMkcsRUFBVyxJQUFJL0IsRUFDbkJ4SCxLQUFLcUQsVUFBVTVCLFFBQVE4SCxJQWMvQkYsRUF0QkEsR0NKQXhHLFNBQVNVLGlCQUFpQixtQkFFMUIsWUFDYyxJQUFJNkYsR0FDWkUsUUFKOEMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi92aWV3XCI7XHJcblxyXG5leHBvcnQgdHlwZSBBbmltYXRpb25GdW5jdGlvbiA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVXBkYXRlRnVuY3Rpb24gPSAodGltZURpZmY6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0YWJsZSB7XHJcbiAgICB1cGRhdGU6IFVwZGF0ZUZ1bmN0aW9uO1xyXG4gICAgZHJhdzogQW5pbWF0aW9uRnVuY3Rpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb24ge1xyXG4gICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgYW5pbWF0aW9uczogQW5pbWF0aW9uRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVzOiBVcGRhdGVGdW5jdGlvbltdID0gW107XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUluQm9keSgpOiBBbmltYXRpb24ge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gXCIwXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XHJcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gXCIxMDAlXCJcclxuICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgYW5pbWF0aW9uLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICBhbmltYXRpb24uY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDgwKSB7IC8vIHNwYWNlXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb24ucGxheVBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQua2V5Q29kZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuaW1hdGlvbi5zdGFydEFuaW1hdGlvbigpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5yZXNpemUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBhbmltYXRpb24ucmVzaXplKTtcclxuICAgICAgICByZXR1cm4gYW5pbWF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjYW52YXMgcmVzaXppbmdcIik7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEFuaW1hdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0IGFuaW1hdGlvblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBzdG9wQW5pbWF0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3RvcCBhbmltYXRpb25cIik7XHJcblxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcGxheVBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID8gdGhpcy5zdG9wQW5pbWF0aW9uKCkgOiB0aGlzLnN0YXJ0QW5pbWF0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbiA9IChmdW5jOiBBbmltYXRpb25GdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVXBkYXRlID0gKGZ1bmM6IFVwZGF0ZUZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goZnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoZnVuYyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRhYmxlID0gKGFuaW1hdGFibGU6IEFuaW1hdGFibGUpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMucHVzaChhbmltYXRhYmxlLnVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2goYW5pbWF0YWJsZS5kcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnNwbGljZSh0aGlzLnVwZGF0ZXMuaW5kZXhPZihhbmltYXRhYmxlLnVwZGF0ZSksIDEpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zcGxpY2UodGhpcy5hbmltYXRpb25zLmluZGV4T2YoYW5pbWF0YWJsZS5kcmF3KSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFZpZXcgPSAodmlldzogVmlldykgPT4ge1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0YWJsZSh2aWV3KTtcclxuICAgICAgICB2aWV3LndpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICB2aWV3LmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVWaWV3ID0gKHZpZXc6IFZpZXcpID0+IHtcclxuICAgICAgICB0aGlzLnJlbW92ZUFuaW1hdGFibGUodmlldyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsYXN0RnJhbWVUaW1lOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGZwcyA9IDQwO1xyXG4gICAgcHJpdmF0ZSBmcHNJbnRlcnZhbCA9IDEwMDAgLyB0aGlzLmZwcztcclxuXHJcbiAgICBwcml2YXRlIGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdmFyIGVsYXBzZWQgPSBub3cgLSB0aGlzLmxhc3RGcmFtZVRpbWU7XHJcblxyXG4gICAgICAgIGlmIChlbGFwc2VkID4gdGhpcy5mcHNJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBub3c7XHJcbiAgICAgICAgICAgIHZhciB0aW1lRGlmZiA9IGVsYXBzZWQgLyAxMDAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdGhpcy51cGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUodGltZURpZmYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFuaW1hdGUgb2YgdGhpcy5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlKHRoaXMuY3R4LCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEVFdmVudFRUIH0gZnJvbSBcIi4vZUV2ZW50XCI7XHJcblxyXG5leHBvcnQgZW51bSBTaWduYWxzIHtcclxuICAgIHN0YXJ0ID0gXCJzdGFydFwiLFxyXG4gICAgbGVmdCA9IFwibGVmdFwiLFxyXG4gICAgdXAgPSBcInVwXCIsXHJcbiAgICByaWdodCA9IFwicmlnaHRcIixcclxuICAgIGRvd24gPSBcImRvd25cIlxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDb250cm9sbGVyVHlwZSB7XHJcbiAgICBrZXlib2FyZCA9IFwia2V5Ym9hcmRcIixcclxuICAgIGdhbWVwYWQgPSBcImdhbWVwYWRcIlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyb2xsZXIge1xyXG4gICAgeEF4ZXM6IG51bWJlcjtcclxuICAgIHlBeGVzOiBudW1iZXI7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgc3RhcnQ6IGJvb2xlYW47XHJcbiAgICBhOiBib29sZWFuO1xyXG5cclxuICAgIHNpZ25hbDogRUV2ZW50VFQ8Q29udHJvbGxlciwgc3RyaW5nPjtcclxuICAgIHR5cGU6IENvbnRyb2xsZXJUeXBlXHJcbn0iLCJpbXBvcnQgeyBBbmltYXRpb25GdW5jdGlvbiwgVXBkYXRlRnVuY3Rpb24sIEFuaW1hdGFibGUsIEFuaW1hdGlvbiB9IGZyb20gXCIuL2FuaW1hdGlvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXcgaW1wbGVtZW50cyBBbmltYXRhYmxlIHtcclxuICAgIHB1YmxpYyBhbmltYXRpb25zOiBBbmltYXRpb25GdW5jdGlvbltdID0gW107XHJcbiAgICBwdWJsaWMgdXBkYXRlczogVXBkYXRlRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBpc1Zpc2libGUgPSB0cnVlO1xyXG5cclxuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyO1xyXG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUgPSAodGltZURpZmY6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB0aGlzLnVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSh0aW1lRGlmZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFuaW1hdGUgb2YgdGhpcy5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlKGN0eCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3cgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbiA9IChmdW5jOiBBbmltYXRpb25GdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVXBkYXRlID0gKGZ1bmM6IFVwZGF0ZUZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goZnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoZnVuYyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRhYmxlID0gKGFuaW1hdGFibGU6IEFuaW1hdGFibGUpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMucHVzaChhbmltYXRhYmxlLnVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2goYW5pbWF0YWJsZS5kcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnNwbGljZSh0aGlzLnVwZGF0ZXMuaW5kZXhPZihhbmltYXRhYmxlLnVwZGF0ZSksIDEpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zcGxpY2UodGhpcy5hbmltYXRpb25zLmluZGV4T2YoYW5pbWF0YWJsZS5kcmF3KSwgMSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRUV2ZW50VDxUPiB7XHJcbiAgICBwcml2YXRlIGxpc3RlbmVyczogKChhcmc6IFQpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzogVCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBhbHJlYWR5IGFkZGVkXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudCA9IChhcmc6IFQpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5saXN0ZW5lcnNbaV07XHJcbiAgICAgICAgICAgIGV2ZW50KGFyZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyID0gKGxpc3RlbmVyOiAoYXJnOiBUKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgLy8gdmFsaWRhdGlvblxyXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPCAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwibGlzdGVuZXIgbm90IGZvdW5kXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5zcGxpY2UodGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lciksIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRUV2ZW50VFQ8VDEsIFQyPiB7XHJcbiAgICBwcml2YXRlIGxpc3RlbmVyczogKChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzE6IFQxLCBhcmcyOiBUMikgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBhbHJlYWR5IGFkZGVkXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudCA9IChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5saXN0ZW5lcnNbaV07XHJcbiAgICAgICAgICAgIGV2ZW50KGFyZzEsIGFyZzIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzE6IFQxLCBhcmcyOiBUMikgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpIDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIG5vdCBmb3VuZFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRyb2xsZXIsIFNpZ25hbHMsIENvbnRyb2xsZXJUeXBlIH0gZnJvbSBcIi4vY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBFRXZlbnRUVCB9IGZyb20gXCIuL2VFdmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEtleWJvYXJkQ29udHJvbHMgaW1wbGVtZW50cyBDb250cm9sbGVyIHtcclxuICAgIHR5cGU6IENvbnRyb2xsZXJUeXBlO1xyXG4gICAgc2lnbmFsOiBFRXZlbnRUVDxDb250cm9sbGVyLCBzdHJpbmc+O1xyXG4gICAgcHVibGljIGE6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgeEF4ZXM6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5QXhlczogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBzdGFydDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCB1cEtleTogbnVtYmVyLCBsZWZ0S2V5OiBudW1iZXIsIGRvd25LZXk6IG51bWJlciwgcmlnaHRLZXk6IG51bWJlciwgYTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gQ29udHJvbGxlclR5cGUua2V5Ym9hcmQ7XHJcbiAgICAgICAgdGhpcy5zaWduYWwgPSBuZXcgRUV2ZW50VFQ8Q29udHJvbGxlciwgc3RyaW5nPigpO1xyXG4gICAgICAgIHRoaXMueEF4ZXMgPSAwO1xyXG4gICAgICAgIHRoaXMueUF4ZXMgPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBsZWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gLTFcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgU2lnbmFscy5sZWZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSB1cEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IC0xO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBTaWduYWxzLnVwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSByaWdodEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54QXhlcyA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIFNpZ25hbHMucmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGRvd25LZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBTaWduYWxzLmRvd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgU2lnbmFscy5zdGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBsZWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy54QXhlcyA9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54QXhlcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gdXBLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnlBeGVzID0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnlBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSByaWdodEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueEF4ZXMgPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54QXhlcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gZG93bktleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueUF4ZXMgPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmEgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRUV2ZW50VCB9IGZyb20gXCIuL2VFdmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVwYWRTY2FubmVyIHtcclxuICAgIHByaXZhdGUgZ2FtZXBhZFNjYW5uZXI6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZ2FtZXBhZHM6IEdhbWVwYWRbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc2Nhbm5lZEdhbWVwYWQgPSBuZXcgRUV2ZW50VDxHYW1lcGFkPigpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lcGFkU2Nhbm5lciA9IHNldEludGVydmFsKHRoaXMuc2NhbmdhbWVwYWRzLCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdG9wKCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5nYW1lcGFkU2Nhbm5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZXBhZHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNjYW5nYW1lcGFkcyA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNjYW5uaW5nIGdhbWVwYWRzXCIpO1xyXG5cclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgPyBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKSA6IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FtZXBhZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGdhbWVwYWRzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNjYW5uZWQgZ2FtZXBhZDogXCIgKyBnYW1lcGFkc1tpXS5pbmRleCArIFwiL1wiICsgZ2FtZXBhZHNbaV0uaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoZ2FtZXBhZHNbaV0uaW5kZXggaW4gdGhpcy5nYW1lcGFkcykgJiYgZ2FtZXBhZHNbaV0uYnV0dG9ucy5sZW5ndGggPj0gMTYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVwYWRzW2dhbWVwYWRzW2ldLmluZGV4XSA9IGdhbWVwYWRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nhbm5lZEdhbWVwYWQuZGlzcGF0Y2hFdmVudChnYW1lcGFkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNjYW5uZWRHYW1lcGFkOiBFRXZlbnRUPEdhbWVwYWQ+O1xyXG59IiwiaW1wb3J0IHsgQ29udHJvbGxlciwgQ29udHJvbGxlclR5cGUsIFNpZ25hbHMgfSBmcm9tIFwiLi9jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEVFdmVudFRUIH0gZnJvbSBcIi4vZUV2ZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZXBhZENvbnRyb2xzIGltcGxlbWVudHMgQ29udHJvbGxlciB7XHJcbiAgICBzaWduYWw6IEVFdmVudFRUPENvbnRyb2xsZXIsIHN0cmluZz47XHJcbiAgICB0eXBlOiBDb250cm9sbGVyVHlwZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCBwcml2YXRlIGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNpZ25hbCA9IG5ldyBFRXZlbnRUVDxDb250cm9sbGVyLCBzdHJpbmc+KCk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gQ29udHJvbGxlclR5cGUuZ2FtZXBhZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHhBeGVzKCk6IG51bWJlciB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XHJcbiAgICAgICAgdmFyIGdwID0gZ2FtZXBhZHNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGdwLmF4ZXNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB5QXhlcygpOiBudW1iZXIge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5heGVzWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc3RhcnQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XHJcbiAgICAgICAgdmFyIGdwID0gZ2FtZXBhZHNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGdwLmJ1dHRvbnNbOV0ucHJlc3NlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGEoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XHJcbiAgICAgICAgdmFyIGdwID0gZ2FtZXBhZHNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGdwLmJ1dHRvbnNbMF0ucHJlc3NlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5hYmxlU2lnbmFscygpIHtcclxuICAgICAgICB0aGlzLnNpZ25hbExpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lb3V0ID0gMC41O1xyXG4gICAgcHJpdmF0ZSBzaWduYWxpbmdUaW1lcnM6IHsgW2lkOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG5cclxuICAgIHByaXZhdGUgc2lnbmFsTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuc2lnbmFsTGlzdGVuZXIpO1xyXG5cclxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja1NpZ25hbCh0aGlzLnN0YXJ0LCBTaWduYWxzLnN0YXJ0LCBub3cpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy55QXhlcyA8IC0wLjMsIFNpZ25hbHMudXAsIG5vdyk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NpZ25hbCh0aGlzLnlBeGVzID4gMC4zLCBTaWduYWxzLmRvd24sIG5vdyk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NpZ25hbCh0aGlzLnhBeGVzIDwgLTAuMywgU2lnbmFscy5sZWZ0LCBub3cpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy54QXhlcyA+IDAuMywgU2lnbmFscy5yaWdodCwgbm93KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrU2lnbmFsID0gKGlzUHJlc3NlZDogYm9vbGVhbiwgc2lnbmFsOiBTaWduYWxzLCBub3c6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmIChpc1ByZXNzZWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNpZ25hbGluZ1RpbWVyc1tzaWduYWxdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1RpbWVyc1tzaWduYWxdID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgc2lnbmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgobm93IC0gdGhpcy5zaWduYWxpbmdUaW1lcnNbc2lnbmFsXSkgLyAxMDAwID49IHRoaXMudGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBzaWduYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1RpbWVyc1tzaWduYWxdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi9lbmMvdmlld1wiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyLCBTaWduYWxzLCBDb250cm9sbGVyVHlwZSB9IGZyb20gXCIuL2VuYy9jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEtleWJvYXJkQ29udHJvbHMgfSBmcm9tIFwiLi9lbmMva2V5Ym9hcmRDb250cm9sc1wiO1xyXG5pbXBvcnQgeyBHYW1lcGFkU2Nhbm5lciB9IGZyb20gXCIuL2VuYy9nYW1lcGFkU2Nhbm5lclwiO1xyXG5pbXBvcnQgeyBHYW1lcGFkQ29udHJvbHMgfSBmcm9tIFwiLi9lbmMvZ2FtZXBhZENvbnRyb2xzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpbk1lbnVWaWV3IGV4dGVuZHMgVmlldyB7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkT3B0aW9uOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG9wdGlvbnM6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIGNvbnRyb2xsZXJzOiBDb250cm9sbGVyW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IFtcIlN0YXJ0IEdhbWVcIiwgXCJDb250cm9sc1wiXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gMDtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbih0aGlzLmRyYXdPcHRpb25zKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbih0aGlzLmRyYXdDb250cm9sbGVycyk7XHJcblxyXG4gICAgICAgIHZhciBnYW1lcGFkU2Nhbm5lciA9IG5ldyBHYW1lcGFkU2Nhbm5lcigpO1xyXG4gICAgICAgIGdhbWVwYWRTY2FubmVyLnNjYW5uZWRHYW1lcGFkLmFkZEV2ZW50TGlzdGVuZXIoKGdhbWVwYWQ6IEdhbWVwYWQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hZGRDb250cm9sbGVyKG5ldyBHYW1lcGFkQ29udHJvbHMoZ2FtZXBhZC5pbmRleC50b1N0cmluZygpLCBnYW1lcGFkLmluZGV4KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2FtZXBhZFNjYW5uZXIuc3RhcnQoKTtcclxuXHJcbiAgICAgICAgdmFyIGtleWJvYXJkID0gbmV3IEtleWJvYXJkQ29udHJvbHMoXCJhcnJvd3NcIiwgMzgsIDM3LCA0MCwgMzksIDE4Nyk7XHJcbiAgICAgICAgdGhpcy5hZGRDb250cm9sbGVyKGtleWJvYXJkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd09wdGlvbnMgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvbnRTaXplID0gMjI7XHJcbiAgICAgICAgY29uc3QgbWFyZ2luID0gNTtcclxuICAgICAgICBjb25zdCBvcHRpb25zSGVpZ2h0ID0gKGZvbnRTaXplICsgbWFyZ2luICogMikgKiB0aGlzLm9wdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0SGVpZ2h0ID0gaGVpZ2h0IC8gMiAtIG9wdGlvbnNIZWlnaHQgLyAyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9uc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyAvLyBzdGFydCAvIGxlZnQgLyBjZW50ZXIgLyByaWdodCAvIGVuZFxyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIiAvLyBib3R0b20gLyBhbHBoYWJldGljIC8gbWlkZGxlIC8gaGFuZ2luZyAvIHRvcFxyXG4gICAgICAgICAgICBjdHguZm9udCA9IFwiMjJweCBzYW5zLXNlcmlmXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkhlaWdodCA9IHN0YXJ0SGVpZ2h0ICsgbWFyZ2luICsgKGZvbnRTaXplICsgbWFyZ2luICogMikgKiBpO1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQob3B0aW9uLCB3aWR0aCAvIDIsIG9wdGlvbkhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gdGhpcy5zZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3Qod2lkdGggLyAyIC0gY3R4Lm1lYXN1cmVUZXh0KG9wdGlvbikud2lkdGggLyAyIC0gbWFyZ2luLCBvcHRpb25IZWlnaHQgLSBmb250U2l6ZSAvIDIgLSBtYXJnaW4sIGN0eC5tZWFzdXJlVGV4dChvcHRpb24pLndpZHRoICsgbWFyZ2luICogMiwgZm9udFNpemUgKyBtYXJnaW4gKiAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd0NvbnRyb2xsZXJzID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIHZhciBtYXJnaW4gPSA1O1xyXG4gICAgICAgIHZhciBjb250cm9sbGVyV2lkdGggPSAzMDtcclxuICAgICAgICB2YXIgdG90YWxXaWR0aCA9IG1hcmdpbiArIHRoaXMuY29udHJvbGxlcnMubGVuZ3RoICogKGNvbnRyb2xsZXJXaWR0aCArIG1hcmdpbilcclxuICAgICAgICB2YXIgc3RhcnRYID0gd2lkdGggLyAyIC0gdG90YWxXaWR0aCAvIDJcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udHJvbGxlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuY29udHJvbGxlcnNbaV07XHJcbiAgICAgICAgICAgIHZhciB4ID0gc3RhcnRYICsgbWFyZ2luICsgKG1hcmdpbiArIGNvbnRyb2xsZXJXaWR0aCkgKiBpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGVsZW1lbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDb250cm9sbGVyVHlwZS5nYW1lcGFkOlxyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCBoZWlnaHQgLyA0LCAyMCwgMjApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDb250cm9sbGVyVHlwZS5rZXlib2FyZDpcclxuICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJncmVlblwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCBoZWlnaHQgLyA0LCAyMCwgMjApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZENvbnRyb2xsZXIgPSAoY29udHJvbGxlcjogQ29udHJvbGxlcikgPT4ge1xyXG4gICAgICAgIGlmIChjb250cm9sbGVyLnR5cGUgPT0gQ29udHJvbGxlclR5cGUuZ2FtZXBhZCkge1xyXG4gICAgICAgICAgICAoPEdhbWVwYWRDb250cm9scz5jb250cm9sbGVyKS5lbmFibGVTaWduYWxzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5jb250cm9sbGVyU2lnbmFsKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29udHJvbGxlclNpZ25hbCA9IChzZW5kZXI6IENvbnRyb2xsZXIsIHNpZ25hbDogU2lnbmFscykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2lnbmFsOiBcIiArIHNpZ25hbCk7XHJcblxyXG4gICAgICAgIGlmIChzaWduYWwgPT0gU2lnbmFscy5zdGFydCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVycy5pbmRleE9mKHNlbmRlcikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVycy5zcGxpY2UodGhpcy5jb250cm9sbGVycy5pbmRleE9mKHNlbmRlciksIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVycy5wdXNoKHNlbmRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29udHJvbGxlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbnRyb2xsZXJzWzBdID09IHNlbmRlcikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNpZ25hbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxzLmRvd246XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uID49IHRoaXMub3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxzLnVwOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24tLTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IHRoaXMub3B0aW9ucy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCIuL2VuYy9hbmltYXRpb25cIjtcclxuaW1wb3J0IHsgTWVudVZpZXcgfSBmcm9tIFwiLi9ibGFkZS9tZW51Vmlld1wiO1xyXG5pbXBvcnQgeyBHYW1lVmlldyB9IGZyb20gXCIuL2JsYWRlL2dhbWVWaWV3XCI7XHJcbmltcG9ydCB7IE1haW5NZW51VmlldyB9IGZyb20gXCIuL21haW5NZW51Vmlld1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBBcHAge1xyXG4gICAgYW5pbWF0aW9uOiBBbmltYXRpb247XHJcbiAgICBtZW51OiBNZW51VmlldztcclxuICAgIGdhbWU6IEdhbWVWaWV3O1xyXG5cclxuICAgIHB1YmxpYyBydW4oKSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSBBbmltYXRpb24uY3JlYXRlSW5Cb2R5KCk7XHJcbiAgICAgICAgdmFyIG1haW5NZW51ID0gbmV3IE1haW5NZW51VmlldygpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLmFkZFZpZXcobWFpbk1lbnUpO1xyXG4gICAgICAgIC8vIHRoaXMubWVudSA9IG5ldyBNZW51Vmlldyh0aGlzLnN0YXJ0KTtcclxuICAgICAgICAvLyB0aGlzLmdhbWUgPSBuZXcgR2FtZVZpZXcoKTtcclxuICAgICAgICAvLyB0aGlzLmFuaW1hdGlvbi5hZGRWaWV3KHRoaXMubWVudSk7XHJcbiAgICAgICAgLy8gdGhpcy5hbmltYXRpb24uYWRkVmlldyh0aGlzLmdhbWUpO1xyXG4gICAgICAgIC8vIHRoaXMuZ2FtZS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBzdGFydCA9ICgpID0+IHtcclxuICAgIC8vICAgICB0aGlzLm1lbnUuaGlkZSgpO1xyXG4gICAgLy8gICAgIHRoaXMubWVudS51bmxvYWQoKTtcclxuICAgIC8vICAgICB0aGlzLmdhbWUuc2hvdygpO1xyXG4gICAgLy8gICAgIHRoaXMuZ2FtZS5zdGFydCh0aGlzLm1lbnUuY29udHJvbGxlcnMpO1xyXG4gICAgLy8gfVxyXG59IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbiwgZmFsc2UpO1xyXG5cclxuZnVuY3Rpb24gbWFpbigpIHtcclxuICBjb25zdCBhcHAgPSBuZXcgQXBwKCk7XHJcbiAgYXBwLnJ1bigpO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==