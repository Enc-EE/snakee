!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){t.exports=n.p+"ea8a77d442cd84a1c20840b411eec697.png"},function(t,e,n){t.exports=n.p+"f6aa7f0421a5ce4cec7cc06690fd335e.png"},function(t,e,n){"use strict";n.r(e);var i,a,s=function(){function t(){var t=this;this.animations=[],this.updates=[],this.resize=function(){console.log("canvas resizing"),t.canvas.width=t.canvas.clientWidth,t.canvas.height=t.canvas.clientHeight},this.isRunning=!1,this.addAnimation=function(e){t.animations.push(e)},this.removeAnimation=function(e){t.animations.splice(t.animations.indexOf(e),1)},this.addUpdate=function(e){t.updates.push(e)},this.removeUpdate=function(e){t.updates.splice(t.updates.indexOf(e),1)},this.addAnimatable=function(e){t.updates.push(e.update),t.animations.push(e.draw)},this.removeAnimatable=function(e){t.updates.splice(t.updates.indexOf(e.update),1),t.animations.splice(t.animations.indexOf(e.draw),1)},this.addView=function(e){t.addAnimatable(e),e.width=t.width,e.height=t.height},this.removeView=function(e){t.removeAnimatable(e)},this.fps=40,this.fpsInterval=1e3/this.fps,this.animate=function(){t.isRunning&&requestAnimationFrame(t.animate);var e=Date.now(),n=e-t.lastFrameTime;if(n>t.fpsInterval){t.lastFrameTime=e;for(var i=n/1e3,a=0,s=t.updates;a<s.length;a++){(0,s[a])(i)}t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height);for(var o=0,r=t.animations;o<r.length;o++){(0,r[o])(t.ctx,t.canvas.width,t.canvas.height)}}}}return Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),t.createInBody=function(){document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var e=document.createElement("canvas");document.body.appendChild(e),e.style.width="100%",e.style.height="100%";var n=new t;return n.canvas=e,n.ctx=e.getContext("2d"),document.addEventListener("keyup",function(t){80==t.keyCode&&n.playPause(),console.log(t.keyCode)}),n.startAnimation(),n.resize(),window.addEventListener("resize",n.resize),n},t.prototype.startAnimation=function(){console.log("start animation"),this.isRunning=!0,this.lastFrameTime=Date.now(),this.animate()},t.prototype.stopAnimation=function(){console.log("stop animation"),this.isRunning=!1},t.prototype.playPause=function(){this.isRunning?this.stopAnimation():this.startAnimation()},t}(),o=function(){return function(){var t=this;this.animations=[],this.updates=[],this.isVisible=!0,this.update=function(e){if(t.isVisible)for(var n=0,i=t.updates;n<i.length;n++)(0,i[n])(e)},this.draw=function(e,n,i){if(t.isVisible)for(var a=0,s=t.animations;a<s.length;a++)(0,s[a])(e,n,i)},this.show=function(){t.isVisible=!0},this.hide=function(){t.isVisible=!1},this.addAnimation=function(e){t.animations.push(e)},this.removeAnimation=function(e){t.animations.splice(t.animations.indexOf(e),1)},this.addUpdate=function(e){t.updates.push(e)},this.removeUpdate=function(e){t.updates.splice(t.updates.indexOf(e),1)},this.addAnimatable=function(e){t.updates.push(e.update),t.animations.push(e.draw)},this.removeAnimatable=function(e){t.updates.splice(t.updates.indexOf(e.update),1),t.animations.splice(t.animations.indexOf(e.draw),1)}}}();!function(t){t.start="start",t.left="left",t.up="up",t.right="right",t.down="down",t.a="a"}(i||(i={})),function(t){t.keyboard="keyboard",t.gamepad="gamepad"}(a||(a={}));var r,c=function(){return function(){var t=this;this.listeners=[],this.addEventListener=function(e){if(!e||t.listeners.indexOf(e)>=0)throw"listener already added";t.listeners.push(e)},this.dispatchEvent=function(e){for(var n=0;n<t.listeners.length;n++)(0,t.listeners[n])(e)},this.removeEventListener=function(e){if(!e||t.listeners.indexOf(e)<0)throw"listener not found";t.listeners.splice(t.listeners.indexOf(e),1)}}}(),d=function(){return function(){var t=this;this.listeners=[],this.addEventListener=function(e){if(!e||t.listeners.indexOf(e)>=0)throw"listener already added";t.listeners.push(e)},this.dispatchEvent=function(e,n){for(var i=0;i<t.listeners.length;i++)(0,t.listeners[i])(e,n)},this.removeEventListener=function(e){if(!e||t.listeners.indexOf(e)<0)throw"listener not found";t.listeners.splice(t.listeners.indexOf(e),1)}}}(),l=function(){return function(t,e,n,s,o,r){var c=this;this.name=t,this.type=a.keyboard,this.signal=new d,this.xAxes=0,this.yAxes=0,this.start=!1,document.addEventListener("keydown",function(t){t.keyCode==n&&(c.xAxes=-1,c.signal.dispatchEvent(c,i.left)),t.keyCode==e&&(c.yAxes=-1,c.signal.dispatchEvent(c,i.up)),t.keyCode==o&&(c.xAxes=1,c.signal.dispatchEvent(c,i.right)),t.keyCode==s&&(c.yAxes=1,c.signal.dispatchEvent(c,i.down)),13==t.keyCode&&(c.start=!0,c.signal.dispatchEvent(c,i.start)),t.keyCode==r&&(c.a=!0,c.signal.dispatchEvent(c,i.a))}),document.addEventListener("keyup",function(t){t.keyCode==n&&(c.xAxes=-1)&&(c.xAxes=0),t.keyCode==e&&(c.yAxes=-1)&&(c.yAxes=0),t.keyCode==o&&(c.xAxes=1)&&(c.xAxes=0),t.keyCode==s&&(c.yAxes=1)&&(c.yAxes=0),13==t.keyCode&&(c.start=!1),t.keyCode==r&&(c.a=!1)})}}(),u=function(){function t(){var t=this;this.gamepads=[],this.scangamepads=function(){console.log("scanning gamepads");for(var e=navigator.getGamepads?navigator.getGamepads():[],n=0;n<e.length;n++)e[n]&&(console.log("scanned gamepad: "+e[n].index+"/"+e[n].id),!(e[n].index in t.gamepads)&&e[n].buttons.length>=16&&(t.gamepads[e[n].index]=e[n],t.scannedGamepad.dispatchEvent(e[n])))},this.scannedGamepad=new c,this.reset()}return t.prototype.start=function(){this.gamepadScanner=setInterval(this.scangamepads,500)},t.prototype.stop=function(){clearInterval(this.gamepadScanner)},t.prototype.reset=function(){this.gamepads=[]},t}(),p=function(){function t(t,e){var n=this;this.name=t,this.index=e,this.timeout=.5,this.signalingTimers={},this.signalListener=function(){requestAnimationFrame(n.signalListener);var t=Date.now();n.checkSignal(n.start,i.start,t),n.checkSignal(n.a,i.a,t),n.checkSignal(n.yAxes<-.5,i.up,t),n.checkSignal(n.yAxes>.5,i.down,t),n.checkSignal(n.xAxes<-.5,i.left,t),n.checkSignal(n.xAxes>.5,i.right,t)},this.checkSignal=function(t,e,i){t?n.signalingTimers[e]?(i-n.signalingTimers[e])/1e3>=n.timeout&&n.signal.dispatchEvent(n,e):(n.signalingTimers[e]=Date.now(),n.signal.dispatchEvent(n,e)):n.signalingTimers[e]=void 0},this.signal=new d,this.type=a.gamepad}return Object.defineProperty(t.prototype,"xAxes",{get:function(){return navigator.getGamepads()[this.index].axes[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yAxes",{get:function(){return navigator.getGamepads()[this.index].axes[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return navigator.getGamepads()[this.index].buttons[9].pressed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return navigator.getGamepads()[this.index].buttons[0].pressed},enumerable:!0,configurable:!0}),t.prototype.enableSignals=function(){this.signalListener()},t}(),h=n(0),f=n.n(h),g=n(1),m=n.n(g),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(t){function e(e){var n=t.call(this)||this;n.start=e,n.options=[],n.controllers=[],n.drawOptions=function(t,e,i){if(!(n.controllers.length<=0))for(var a=i/2-32*n.options.length/2,s=0;s<n.options.length;s++){var o=n.options[s];t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.font="22px sans-serif";var r=a+5+32*s;t.fillText(o,e/2,r),s===n.selectedOption&&t.strokeRect(e/2-t.measureText(o).width/2-5,r-11-5,t.measureText(o).width+10,32)}},n.drawControllers=function(t,e,i){for(var s=e/2-(15+75*n.controllers.length)/2,o=0;o<n.controllers.length;o++){var r=s+15+75*o;switch(n.controllers[o].type){case a.gamepad:t.fillStyle="red",t.font="60px FontAwesome",t.fillText("",r,i/4);break;case a.keyboard:t.fillStyle="green",t.font="60px FontAwesome",t.fillText("",r,i/4)}}},n.addController=function(t){t.type==a.gamepad&&t.enableSignals(),t.signal.addEventListener(n.controllerSignal)},n.controllerSignal=function(t,e){if(console.log("signal: "+e),e==i.start)n.controllers.indexOf(t)>=0?n.controllers.splice(n.controllers.indexOf(t),1):n.controllers.push(t);else if(n.controllers.length>0&&n.controllers[0]==t)switch(e){case i.down:n.selectedOption++,n.selectedOption>=n.options.length&&(n.selectedOption=0);break;case i.up:n.selectedOption--,n.selectedOption<0&&(n.selectedOption=n.options.length-1);break;case i.a:switch(n.selectedOption){case 0:n.gamepadScanner.stop(),n.start();break;case 1:n.showControls=!n.showControls}}},n.options=["Start Game","Show / Hide Controls"],n.selectedOption=0,n.showControls=!0,n.controls_gamepad_image=new Image,n.controls_gamepad_image.src=f.a,n.controls_keyboard_image=new Image,n.controls_keyboard_image.src=m.a,n.addAnimation(function(t,e,i){if(n.showControls){var a=e/3,s=a/n.controls_gamepad_image.naturalWidth*n.controls_gamepad_image.naturalHeight;t.drawImage(n.controls_gamepad_image,a-a/2,3*i/4-s/2,a,s),s=a/n.controls_keyboard_image.naturalWidth*n.controls_keyboard_image.naturalHeight,t.drawImage(n.controls_keyboard_image,2*a-a/2,3*i/4-s/2,a,s)}}),n.addAnimation(n.drawOptions),n.addAnimation(n.drawControllers),n.gamepadScanner=new u,n.gamepadScanner.scannedGamepad.addEventListener(function(t){n.addController(new p(t.index.toString(),t.index))}),n.gamepadScanner.start();var s=new l("arrows",38,37,40,39,32);return n.addController(s),n}return y(e,t),e}(o);!function(t){t[t.up=0]="up",t[t.right=1]="right",t[t.down=2]="down",t[t.left=3]="left"}(r||(r={}));var x=function(){return function(t,e,n){var a=this;this.fieldWidth=t,this.fieldHeight=e,this.controller=n,this.parts=[],this.controllerSignal=function(t,e){switch(e){case i.up:a.direction!=r.down&&(a.direction=r.up);break;case i.right:a.direction!=r.left&&(a.direction=r.right);break;case i.down:a.direction!=r.up&&(a.direction=r.down);break;case i.left:a.direction!=r.right&&(a.direction=r.left)}},this.tick=function(){var t=a.parts[a.parts.length-1];switch(a.direction){case r.up:a.parts.push({x:t.x,y:t.y-1});break;case r.right:a.parts.push({x:t.x+1,y:t.y});break;case r.down:a.parts.push({x:t.x,y:t.y+1});break;case r.left:a.parts.push({x:t.x-1,y:t.y})}a.parts.shift()},this.update=function(t){},this.draw=function(t,e,n){for(var i=0;i<a.parts.length;i++){var s=a.parts[i];t.fillStyle="black",t.fillRect(e/a.fieldHeight*s.x,n/a.fieldHeight*s.y,10,10)}},this.direction=r.right,this.parts=[{x:3,y:5},{x:4,y:5},{x:5,y:5}],n.signal.addEventListener(this.controllerSignal)}}(),w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.snakes=[],e.fpsInterval=300,e}return w(e,t),e.prototype.start=function(t){for(var e=this,n=0;n<t.length;n++){var i=t[n],a=new x(150,100,i);this.addAnimatable(a),this.snakes.push(a)}this.lastFrameTime=Date.now(),this.addUpdate(function(t){var n=Date.now();if(n-e.lastFrameTime>e.fpsInterval){e.lastFrameTime=n;for(var i=0;i<e.snakes.length;i++){e.snakes[i].tick()}}})},e}(o),k=function(){function t(){var t=this;this.start=function(){t.menu.hide(),t.game.show(),t.game.start(t.menu.controllers)}}return t.prototype.run=function(){this.animation=s.createInBody(),this.menu=new v(this.start),this.animation.addView(this.menu),this.game=new b,this.animation.addView(this.game),this.game.hide()},t}();document.addEventListener("DOMContentLoaded",function(){(new k).run()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9jb250cm9sc19nYW1lcGFkLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2NvbnRyb2xzX2tleWJvYXJkLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2FuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9lbmMvZUV2ZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9zbmFrZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2tleWJvYXJkQ29udHJvbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy9nYW1lcGFkU2Nhbm5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2dhbWVwYWRDb250cm9scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbk1lbnVWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNpZ25hbHMiLCJDb250cm9sbGVyVHlwZSIsIkFuaW1hdGlvbiIsIl90aGlzIiwidGhpcyIsImFuaW1hdGlvbnMiLCJ1cGRhdGVzIiwicmVzaXplIiwiY29uc29sZSIsImxvZyIsImNhbnZhcyIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJpc1J1bm5pbmciLCJhZGRBbmltYXRpb24iLCJmdW5jIiwicHVzaCIsInJlbW92ZUFuaW1hdGlvbiIsInNwbGljZSIsImluZGV4T2YiLCJhZGRVcGRhdGUiLCJyZW1vdmVVcGRhdGUiLCJhZGRBbmltYXRhYmxlIiwiYW5pbWF0YWJsZSIsInVwZGF0ZSIsImRyYXciLCJyZW1vdmVBbmltYXRhYmxlIiwiYWRkVmlldyIsInZpZXciLCJyZW1vdmVWaWV3IiwiZnBzIiwiZnBzSW50ZXJ2YWwiLCJhbmltYXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibm93IiwiRGF0ZSIsImVsYXBzZWQiLCJsYXN0RnJhbWVUaW1lIiwidGltZURpZmYiLCJfaSIsIl9hIiwibGVuZ3RoIiwiY3R4IiwiY2xlYXJSZWN0IiwiX2IiLCJfYyIsImNyZWF0ZUluQm9keSIsImRvY3VtZW50IiwiYm9keSIsInBhcmVudEVsZW1lbnQiLCJzdHlsZSIsIm1hcmdpbiIsIm92ZXJmbG93IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiYW5pbWF0aW9uIiwiZ2V0Q29udGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleUNvZGUiLCJwbGF5UGF1c2UiLCJzdGFydEFuaW1hdGlvbiIsIndpbmRvdyIsInN0b3BBbmltYXRpb24iLCJWaWV3IiwiaXNWaXNpYmxlIiwic2hvdyIsImhpZGUiLCJEaXJlY3Rpb24iLCJFRXZlbnRUIiwibGlzdGVuZXJzIiwibGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50IiwiYXJnIiwiZXZlbnRfMSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJFRXZlbnRUVCIsImFyZzEiLCJhcmcyIiwiZXZlbnRfMiIsImtleWJvYXJkQ29udHJvbHNfS2V5Ym9hcmRDb250cm9scyIsInVwS2V5IiwibGVmdEtleSIsImRvd25LZXkiLCJyaWdodEtleSIsImEiLCJ0eXBlIiwia2V5Ym9hcmQiLCJzaWduYWwiLCJ4QXhlcyIsInlBeGVzIiwic3RhcnQiLCJsZWZ0IiwidXAiLCJyaWdodCIsImRvd24iLCJnYW1lcGFkU2Nhbm5lcl9HYW1lcGFkU2Nhbm5lciIsIkdhbWVwYWRTY2FubmVyIiwiZ2FtZXBhZHMiLCJzY2FuZ2FtZXBhZHMiLCJuYXZpZ2F0b3IiLCJnZXRHYW1lcGFkcyIsImluZGV4IiwiaWQiLCJidXR0b25zIiwic2Nhbm5lZEdhbWVwYWQiLCJyZXNldCIsImdhbWVwYWRTY2FubmVyIiwic2V0SW50ZXJ2YWwiLCJzdG9wIiwiY2xlYXJJbnRlcnZhbCIsImdhbWVwYWRDb250cm9sc19HYW1lcGFkQ29udHJvbHMiLCJHYW1lcGFkQ29udHJvbHMiLCJ0aW1lb3V0Iiwic2lnbmFsaW5nVGltZXJzIiwic2lnbmFsTGlzdGVuZXIiLCJjaGVja1NpZ25hbCIsImlzUHJlc3NlZCIsInVuZGVmaW5lZCIsImdhbWVwYWQiLCJheGVzIiwicHJlc3NlZCIsImVuYWJsZVNpZ25hbHMiLCJtYWluTWVudVZpZXdfTWFpbk1lbnVWaWV3IiwiX3N1cGVyIiwiTWFpbk1lbnVWaWV3Iiwib3B0aW9ucyIsImNvbnRyb2xsZXJzIiwiZHJhd09wdGlvbnMiLCJzdGFydEhlaWdodCIsIm9wdGlvbiIsImZpbGxTdHlsZSIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsImZvbnQiLCJvcHRpb25IZWlnaHQiLCJmaWxsVGV4dCIsInNlbGVjdGVkT3B0aW9uIiwic3Ryb2tlUmVjdCIsIm1lYXN1cmVUZXh0IiwiZm9udFNpemUiLCJkcmF3Q29udHJvbGxlcnMiLCJzdGFydFgiLCJ4IiwiYWRkQ29udHJvbGxlciIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyU2lnbmFsIiwic2VuZGVyIiwic2hvd0NvbnRyb2xzIiwiY29udHJvbHNfZ2FtZXBhZF9pbWFnZSIsIkltYWdlIiwic3JjIiwiY29udHJvbHNfZ2FtZXBhZF9kZWZhdWx0IiwiY29udHJvbHNfa2V5Ym9hcmRfaW1hZ2UiLCJjb250cm9sc19rZXlib2FyZF9kZWZhdWx0IiwibmV3V2lkdGgiLCJuZXdIZWlnaHQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwiZHJhd0ltYWdlIiwidG9TdHJpbmciLCJfX2V4dGVuZHMiLCJzbmFrZV9TbmFrZSIsImZpZWxkV2lkdGgiLCJmaWVsZEhlaWdodCIsInBhcnRzIiwiZGlyZWN0aW9uIiwidGljayIsImN1cnJlbnQiLCJ5Iiwic2hpZnQiLCJwYXJ0IiwiZmlsbFJlY3QiLCJnYW1lVmlld19HYW1lVmlldyIsIkdhbWVWaWV3IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzbmFrZXMiLCJnYW1lVmlld19leHRlbmRzIiwic25ha2UiLCJhcHBfQXBwIiwiQXBwIiwibWVudSIsImdhbWUiLCJydW4iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIs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SCxFQUFBLG9CQUFBQyxJQUFBLElBQUFwTCxFQUFBQyxLQWVZQSxLQUFBeUYsTUFBUSxXQUNaMUYsRUFBS3FMLEtBQUtuSCxPQUNWbEUsRUFBS3NMLEtBQUtySCxPQUNWakUsRUFBS3NMLEtBQUs1RixNQUFNMUYsRUFBS3FMLEtBQUt2RCxjQUVsQyxPQWZXc0QsRUFBQTNMLFVBQUE4TCxJQUFQLFdBQ0l0TCxLQUFLcUQsVUFBWXZELEVBQVU4QyxlQUMzQjVDLEtBQUtvTCxLQUFPLElBQUkzRCxFQUFhekgsS0FBS3lGLE9BQ2xDekYsS0FBS3FELFVBQVU1QixRQUFRekIsS0FBS29MLE1BRTVCcEwsS0FBS3FMLEtBQU8sSUFBSVYsRUFDaEIzSyxLQUFLcUQsVUFBVTVCLFFBQVF6QixLQUFLcUwsTUFDNUJyTCxLQUFLcUwsS0FBS3BILFFBUWxCa0gsRUFwQkEsR0NIQXRJLFNBQVNVLGlCQUFpQixtQkFFMUIsWUFDYyxJQUFJMkgsR0FDWkksUUFKOEMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImVhOGE3N2Q0NDJjZDg0YTFjMjA4NDBiNDExZWVjNjk3LnBuZ1wiOyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImY2YWE3ZjA0MjFhNWNlNGNlYzdjYzA2NjkwZmQzMzVlLnBuZ1wiOyIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi92aWV3XCI7XHJcblxyXG5leHBvcnQgdHlwZSBBbmltYXRpb25GdW5jdGlvbiA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVXBkYXRlRnVuY3Rpb24gPSAodGltZURpZmY6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0YWJsZSB7XHJcbiAgICB1cGRhdGU6IFVwZGF0ZUZ1bmN0aW9uO1xyXG4gICAgZHJhdzogQW5pbWF0aW9uRnVuY3Rpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb24ge1xyXG4gICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgYW5pbWF0aW9uczogQW5pbWF0aW9uRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVzOiBVcGRhdGVGdW5jdGlvbltdID0gW107XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUluQm9keSgpOiBBbmltYXRpb24ge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gXCIwXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XHJcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gXCIxMDAlXCJcclxuICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgYW5pbWF0aW9uLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICBhbmltYXRpb24uY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDgwKSB7IC8vIHNwYWNlXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb24ucGxheVBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQua2V5Q29kZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuaW1hdGlvbi5zdGFydEFuaW1hdGlvbigpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5yZXNpemUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBhbmltYXRpb24ucmVzaXplKTtcclxuICAgICAgICByZXR1cm4gYW5pbWF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjYW52YXMgcmVzaXppbmdcIik7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEFuaW1hdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0IGFuaW1hdGlvblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBzdG9wQW5pbWF0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3RvcCBhbmltYXRpb25cIik7XHJcblxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcGxheVBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID8gdGhpcy5zdG9wQW5pbWF0aW9uKCkgOiB0aGlzLnN0YXJ0QW5pbWF0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbiA9IChmdW5jOiBBbmltYXRpb25GdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVXBkYXRlID0gKGZ1bmM6IFVwZGF0ZUZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goZnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoZnVuYyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRhYmxlID0gKGFuaW1hdGFibGU6IEFuaW1hdGFibGUpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMucHVzaChhbmltYXRhYmxlLnVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2goYW5pbWF0YWJsZS5kcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnNwbGljZSh0aGlzLnVwZGF0ZXMuaW5kZXhPZihhbmltYXRhYmxlLnVwZGF0ZSksIDEpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zcGxpY2UodGhpcy5hbmltYXRpb25zLmluZGV4T2YoYW5pbWF0YWJsZS5kcmF3KSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFZpZXcgPSAodmlldzogVmlldykgPT4ge1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0YWJsZSh2aWV3KTtcclxuICAgICAgICB2aWV3LndpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICB2aWV3LmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVWaWV3ID0gKHZpZXc6IFZpZXcpID0+IHtcclxuICAgICAgICB0aGlzLnJlbW92ZUFuaW1hdGFibGUodmlldyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsYXN0RnJhbWVUaW1lOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGZwcyA9IDQwO1xyXG4gICAgcHJpdmF0ZSBmcHNJbnRlcnZhbCA9IDEwMDAgLyB0aGlzLmZwcztcclxuXHJcbiAgICBwcml2YXRlIGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdmFyIGVsYXBzZWQgPSBub3cgLSB0aGlzLmxhc3RGcmFtZVRpbWU7XHJcblxyXG4gICAgICAgIGlmIChlbGFwc2VkID4gdGhpcy5mcHNJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBub3c7XHJcbiAgICAgICAgICAgIHZhciB0aW1lRGlmZiA9IGVsYXBzZWQgLyAxMDAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdGhpcy51cGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUodGltZURpZmYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFuaW1hdGUgb2YgdGhpcy5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlKHRoaXMuY3R4LCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEVFdmVudFRUIH0gZnJvbSBcIi4vZUV2ZW50XCI7XHJcblxyXG5leHBvcnQgZW51bSBTaWduYWxzIHtcclxuICAgIHN0YXJ0ID0gXCJzdGFydFwiLFxyXG4gICAgbGVmdCA9IFwibGVmdFwiLFxyXG4gICAgdXAgPSBcInVwXCIsXHJcbiAgICByaWdodCA9IFwicmlnaHRcIixcclxuICAgIGRvd24gPSBcImRvd25cIixcclxuICAgIGEgPSBcImFcIlxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDb250cm9sbGVyVHlwZSB7XHJcbiAgICBrZXlib2FyZCA9IFwia2V5Ym9hcmRcIixcclxuICAgIGdhbWVwYWQgPSBcImdhbWVwYWRcIlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyb2xsZXIge1xyXG4gICAgeEF4ZXM6IG51bWJlcjtcclxuICAgIHlBeGVzOiBudW1iZXI7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgc3RhcnQ6IGJvb2xlYW47XHJcbiAgICBhOiBib29sZWFuO1xyXG5cclxuICAgIHNpZ25hbDogRUV2ZW50VFQ8Q29udHJvbGxlciwgc3RyaW5nPjtcclxuICAgIHR5cGU6IENvbnRyb2xsZXJUeXBlXHJcbn0iLCJpbXBvcnQgeyBBbmltYXRpb25GdW5jdGlvbiwgVXBkYXRlRnVuY3Rpb24sIEFuaW1hdGFibGUsIEFuaW1hdGlvbiB9IGZyb20gXCIuL2FuaW1hdGlvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXcgaW1wbGVtZW50cyBBbmltYXRhYmxlIHtcclxuICAgIHB1YmxpYyBhbmltYXRpb25zOiBBbmltYXRpb25GdW5jdGlvbltdID0gW107XHJcbiAgICBwdWJsaWMgdXBkYXRlczogVXBkYXRlRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBpc1Zpc2libGUgPSB0cnVlO1xyXG5cclxuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyO1xyXG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUgPSAodGltZURpZmY6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB0aGlzLnVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSh0aW1lRGlmZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFuaW1hdGUgb2YgdGhpcy5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlKGN0eCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3cgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbiA9IChmdW5jOiBBbmltYXRpb25GdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVXBkYXRlID0gKGZ1bmM6IFVwZGF0ZUZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goZnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoZnVuYyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRhYmxlID0gKGFuaW1hdGFibGU6IEFuaW1hdGFibGUpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMucHVzaChhbmltYXRhYmxlLnVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2goYW5pbWF0YWJsZS5kcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnNwbGljZSh0aGlzLnVwZGF0ZXMuaW5kZXhPZihhbmltYXRhYmxlLnVwZGF0ZSksIDEpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zcGxpY2UodGhpcy5hbmltYXRpb25zLmluZGV4T2YoYW5pbWF0YWJsZS5kcmF3KSwgMSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRUV2ZW50VDxUPiB7XHJcbiAgICBwcml2YXRlIGxpc3RlbmVyczogKChhcmc6IFQpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzogVCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBhbHJlYWR5IGFkZGVkXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudCA9IChhcmc6IFQpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5saXN0ZW5lcnNbaV07XHJcbiAgICAgICAgICAgIGV2ZW50KGFyZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyID0gKGxpc3RlbmVyOiAoYXJnOiBUKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgLy8gdmFsaWRhdGlvblxyXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPCAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwibGlzdGVuZXIgbm90IGZvdW5kXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5zcGxpY2UodGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lciksIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRUV2ZW50VFQ8VDEsIFQyPiB7XHJcbiAgICBwcml2YXRlIGxpc3RlbmVyczogKChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzE6IFQxLCBhcmcyOiBUMikgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBhbHJlYWR5IGFkZGVkXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudCA9IChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5saXN0ZW5lcnNbaV07XHJcbiAgICAgICAgICAgIGV2ZW50KGFyZzEsIGFyZzIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzE6IFQxLCBhcmcyOiBUMikgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpIDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIG5vdCBmb3VuZFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEFuaW1hdGFibGUgfSBmcm9tIFwiLi9lbmMvYW5pbWF0aW9uXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXIsIFNpZ25hbHMgfSBmcm9tIFwiLi9lbmMvY29udHJvbGxlclwiO1xyXG5cclxuZW51bSBEaXJlY3Rpb24ge1xyXG4gICAgdXAsXHJcbiAgICByaWdodCxcclxuICAgIGRvd24sXHJcbiAgICBsZWZ0XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTbmFrZSBpbXBsZW1lbnRzIEFuaW1hdGFibGUge1xyXG5cclxuICAgIHByaXZhdGUgcGFydHM6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfVtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IERpcmVjdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZpZWxkV2lkdGg6IG51bWJlciwgcHJpdmF0ZSBmaWVsZEhlaWdodDogbnVtYmVyLCBwcml2YXRlIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5yaWdodDtcclxuICAgICAgICB0aGlzLnBhcnRzID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4OiAzLFxyXG4gICAgICAgICAgICAgICAgeTogNSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeDogNCxcclxuICAgICAgICAgICAgICAgIHk6IDUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHg6IDUsXHJcbiAgICAgICAgICAgICAgICB5OiA1LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICAgIGNvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5jb250cm9sbGVyU2lnbmFsKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29udHJvbGxlclNpZ25hbCA9IChzZW5kZXI6IENvbnRyb2xsZXIsIHNpZ25hbDogU2lnbmFscykgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAoc2lnbmFsKSB7XHJcbiAgICAgICAgICAgIGNhc2UgU2lnbmFscy51cDpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPSBEaXJlY3Rpb24uZG93bikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLnVwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2lnbmFscy5yaWdodDpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPSBEaXJlY3Rpb24ubGVmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2lnbmFscy5kb3duOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uICE9IERpcmVjdGlvbi51cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLmRvd247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTaWduYWxzLmxlZnQ6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT0gRGlyZWN0aW9uLnJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24ubGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGljayA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5wYXJ0c1t0aGlzLnBhcnRzLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi51cDpcclxuICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHg6IGN1cnJlbnQueCwgeTogY3VycmVudC55IC0gMSB9KVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLnJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgeDogY3VycmVudC54ICsgMSwgeTogY3VycmVudC55IH0pXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uZG93bjpcclxuICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHg6IGN1cnJlbnQueCwgeTogY3VycmVudC55ICsgMSB9KVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLmxlZnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB4OiBjdXJyZW50LnggLSAxLCB5OiBjdXJyZW50LnkgfSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcnRzLnNoaWZ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSA9ICh0aW1lRGlmZjogbnVtYmVyKSA9PiB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcGFydCA9IHRoaXMucGFydHNbaV07XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh3aWR0aCAvIHRoaXMuZmllbGRIZWlnaHQgKiBwYXJ0LngsIGhlaWdodCAvIHRoaXMuZmllbGRIZWlnaHQgKiBwYXJ0LnksIDEwLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29udHJvbGxlciwgU2lnbmFscywgQ29udHJvbGxlclR5cGUgfSBmcm9tIFwiLi9jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEVFdmVudFRUIH0gZnJvbSBcIi4vZUV2ZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmRDb250cm9scyBpbXBsZW1lbnRzIENvbnRyb2xsZXIge1xyXG4gICAgdHlwZTogQ29udHJvbGxlclR5cGU7XHJcbiAgICBzaWduYWw6IEVFdmVudFRUPENvbnRyb2xsZXIsIHN0cmluZz47XHJcbiAgICBwdWJsaWMgYTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyB4QXhlczogbnVtYmVyO1xyXG4gICAgcHVibGljIHlBeGVzOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIHN0YXJ0OiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcsIHVwS2V5OiBudW1iZXIsIGxlZnRLZXk6IG51bWJlciwgZG93bktleTogbnVtYmVyLCByaWdodEtleTogbnVtYmVyLCBhOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBDb250cm9sbGVyVHlwZS5rZXlib2FyZDtcclxuICAgICAgICB0aGlzLnNpZ25hbCA9IG5ldyBFRXZlbnRUVDxDb250cm9sbGVyLCBzdHJpbmc+KCk7XHJcbiAgICAgICAgdGhpcy54QXhlcyA9IDA7XHJcbiAgICAgICAgdGhpcy55QXhlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5zdGFydCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGxlZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueEF4ZXMgPSAtMVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBTaWduYWxzLmxlZnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHVwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnlBeGVzID0gLTE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIFNpZ25hbHMudXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHJpZ2h0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgU2lnbmFscy5yaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gZG93bktleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIFNpZ25hbHMuZG93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBTaWduYWxzLnN0YXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBTaWduYWxzLmEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGxlZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnhBeGVzID0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSB1cEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueUF4ZXMgPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHJpZ2h0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy54QXhlcyA9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBkb3duS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy55QXhlcyA9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnlBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBFRXZlbnRUIH0gZnJvbSBcIi4vZUV2ZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZXBhZFNjYW5uZXIge1xyXG4gICAgcHJpdmF0ZSBnYW1lcGFkU2Nhbm5lcjogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBnYW1lcGFkczogR2FtZXBhZFtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zY2FubmVkR2FtZXBhZCA9IG5ldyBFRXZlbnRUPEdhbWVwYWQ+KCk7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLmdhbWVwYWRTY2FubmVyID0gc2V0SW50ZXJ2YWwodGhpcy5zY2FuZ2FtZXBhZHMsIDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3AoKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdhbWVwYWRTY2FubmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lcGFkcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2NhbmdhbWVwYWRzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2Nhbm5pbmcgZ2FtZXBhZHNcIik7XHJcblxyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcyA/IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpIDogW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnYW1lcGFkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZXBhZHNbaV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2Nhbm5lZCBnYW1lcGFkOiBcIiArIGdhbWVwYWRzW2ldLmluZGV4ICsgXCIvXCIgKyBnYW1lcGFkc1tpXS5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShnYW1lcGFkc1tpXS5pbmRleCBpbiB0aGlzLmdhbWVwYWRzKSAmJiBnYW1lcGFkc1tpXS5idXR0b25zLmxlbmd0aCA+PSAxNikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZHNbZ2FtZXBhZHNbaV0uaW5kZXhdID0gZ2FtZXBhZHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FubmVkR2FtZXBhZC5kaXNwYXRjaEV2ZW50KGdhbWVwYWRzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2Nhbm5lZEdhbWVwYWQ6IEVFdmVudFQ8R2FtZXBhZD47XHJcbn0iLCJpbXBvcnQgeyBDb250cm9sbGVyLCBDb250cm9sbGVyVHlwZSwgU2lnbmFscyB9IGZyb20gXCIuL2NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgRUV2ZW50VFQgfSBmcm9tIFwiLi9lRXZlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lcGFkQ29udHJvbHMgaW1wbGVtZW50cyBDb250cm9sbGVyIHtcclxuICAgIHNpZ25hbDogRUV2ZW50VFQ8Q29udHJvbGxlciwgc3RyaW5nPjtcclxuICAgIHR5cGU6IENvbnRyb2xsZXJUeXBlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcsIHByaXZhdGUgaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2lnbmFsID0gbmV3IEVFdmVudFRUPENvbnRyb2xsZXIsIHN0cmluZz4oKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBDb250cm9sbGVyVHlwZS5nYW1lcGFkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgeEF4ZXMoKTogbnVtYmVyIHtcclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcclxuICAgICAgICB2YXIgZ3AgPSBnYW1lcGFkc1t0aGlzLmluZGV4XTtcclxuICAgICAgICByZXR1cm4gZ3AuYXhlc1swXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHlBeGVzKCk6IG51bWJlciB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XHJcbiAgICAgICAgdmFyIGdwID0gZ2FtZXBhZHNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGdwLmF4ZXNbMV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzdGFydCgpOiBib29sZWFuIHtcclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcclxuICAgICAgICB2YXIgZ3AgPSBnYW1lcGFkc1t0aGlzLmluZGV4XTtcclxuICAgICAgICByZXR1cm4gZ3AuYnV0dG9uc1s5XS5wcmVzc2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgYSgpOiBib29sZWFuIHtcclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcclxuICAgICAgICB2YXIgZ3AgPSBnYW1lcGFkc1t0aGlzLmluZGV4XTtcclxuICAgICAgICByZXR1cm4gZ3AuYnV0dG9uc1swXS5wcmVzc2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmFibGVTaWduYWxzKCkge1xyXG4gICAgICAgIHRoaXMuc2lnbmFsTGlzdGVuZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRpbWVvdXQgPSAwLjU7XHJcbiAgICBwcml2YXRlIHNpZ25hbGluZ1RpbWVyczogeyBbaWQ6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcblxyXG4gICAgcHJpdmF0ZSBzaWduYWxMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zaWduYWxMaXN0ZW5lcik7XHJcblxyXG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrU2lnbmFsKHRoaXMuc3RhcnQsIFNpZ25hbHMuc3RhcnQsIG5vdyk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NpZ25hbCh0aGlzLmEsIFNpZ25hbHMuYSwgbm93KTtcclxuICAgICAgICB0aGlzLmNoZWNrU2lnbmFsKHRoaXMueUF4ZXMgPCAtMC41LCBTaWduYWxzLnVwLCBub3cpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy55QXhlcyA+IDAuNSwgU2lnbmFscy5kb3duLCBub3cpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy54QXhlcyA8IC0wLjUsIFNpZ25hbHMubGVmdCwgbm93KTtcclxuICAgICAgICB0aGlzLmNoZWNrU2lnbmFsKHRoaXMueEF4ZXMgPiAwLjUsIFNpZ25hbHMucmlnaHQsIG5vdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja1NpZ25hbCA9IChpc1ByZXNzZWQ6IGJvb2xlYW4sIHNpZ25hbDogU2lnbmFscywgbm93OiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAoaXNQcmVzc2VkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zaWduYWxpbmdUaW1lcnNbc2lnbmFsXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWxpbmdUaW1lcnNbc2lnbmFsXSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIHNpZ25hbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKG5vdyAtIHRoaXMuc2lnbmFsaW5nVGltZXJzW3NpZ25hbF0pIC8gMTAwMCA+PSB0aGlzLnRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgc2lnbmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaWduYWxpbmdUaW1lcnNbc2lnbmFsXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIi4vZW5jL3ZpZXdcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlciwgU2lnbmFscywgQ29udHJvbGxlclR5cGUgfSBmcm9tIFwiLi9lbmMvY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBLZXlib2FyZENvbnRyb2xzIH0gZnJvbSBcIi4vZW5jL2tleWJvYXJkQ29udHJvbHNcIjtcclxuaW1wb3J0IHsgR2FtZXBhZFNjYW5uZXIgfSBmcm9tIFwiLi9lbmMvZ2FtZXBhZFNjYW5uZXJcIjtcclxuaW1wb3J0IHsgR2FtZXBhZENvbnRyb2xzIH0gZnJvbSBcIi4vZW5jL2dhbWVwYWRDb250cm9sc1wiO1xyXG5pbXBvcnQgY29udHJvbHNfZ2FtZXBhZCBmcm9tIFwiLi9hc3NldHMvY29udHJvbHNfZ2FtZXBhZC5wbmdcIjtcclxuaW1wb3J0IGNvbnRyb2xzX2tleWJvYXJkIGZyb20gXCIuL2Fzc2V0cy9jb250cm9sc19rZXlib2FyZC5wbmdcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNYWluTWVudVZpZXcgZXh0ZW5kcyBWaWV3IHtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRPcHRpb246IG51bWJlcjtcclxuICAgIHByaXZhdGUgb3B0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgIHB1YmxpYyBjb250cm9sbGVyczogQ29udHJvbGxlcltdID0gW107XHJcbiAgICBjb250cm9sc19nYW1lcGFkX2ltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29udHJvbHNfa2V5Ym9hcmRfaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29udHJvbHM6IGJvb2xlYW47XHJcbiAgICBnYW1lcGFkU2Nhbm5lcjogR2FtZXBhZFNjYW5uZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzdGFydDogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gW1wiU3RhcnQgR2FtZVwiLCBcIlNob3cgLyBIaWRlIENvbnRyb2xzXCJdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuc2hvd0NvbnRyb2xzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9sc19nYW1lcGFkX2ltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sc19nYW1lcGFkX2ltYWdlLnNyYyA9IGNvbnRyb2xzX2dhbWVwYWQ7XHJcbiAgICAgICAgdGhpcy5jb250cm9sc19rZXlib2FyZF9pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHNfa2V5Ym9hcmRfaW1hZ2Uuc3JjID0gY29udHJvbHNfa2V5Ym9hcmQ7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uKChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbnRyb2xzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3V2lkdGggPSB3aWR0aCAvIDM7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyB0aGlzLmNvbnRyb2xzX2dhbWVwYWRfaW1hZ2UubmF0dXJhbFdpZHRoICogdGhpcy5jb250cm9sc19nYW1lcGFkX2ltYWdlLm5hdHVyYWxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMuY29udHJvbHNfZ2FtZXBhZF9pbWFnZSwgbmV3V2lkdGggLSBuZXdXaWR0aCAvIDIsIGhlaWdodCAqIDMgLyA0IC0gbmV3SGVpZ2h0IC8gMiwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIHRoaXMuY29udHJvbHNfa2V5Ym9hcmRfaW1hZ2UubmF0dXJhbFdpZHRoICogdGhpcy5jb250cm9sc19rZXlib2FyZF9pbWFnZS5uYXR1cmFsSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmNvbnRyb2xzX2tleWJvYXJkX2ltYWdlLCBuZXdXaWR0aCAqIDIgLSBuZXdXaWR0aCAvIDIsIGhlaWdodCAqIDMgLyA0IC0gbmV3SGVpZ2h0IC8gMiwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb24odGhpcy5kcmF3T3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb24odGhpcy5kcmF3Q29udHJvbGxlcnMpO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVwYWRTY2FubmVyID0gbmV3IEdhbWVwYWRTY2FubmVyKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lcGFkU2Nhbm5lci5zY2FubmVkR2FtZXBhZC5hZGRFdmVudExpc3RlbmVyKChnYW1lcGFkOiBHYW1lcGFkKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29udHJvbGxlcihuZXcgR2FtZXBhZENvbnRyb2xzKGdhbWVwYWQuaW5kZXgudG9TdHJpbmcoKSwgZ2FtZXBhZC5pbmRleCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZXBhZFNjYW5uZXIuc3RhcnQoKTtcclxuXHJcbiAgICAgICAgdmFyIGtleWJvYXJkID0gbmV3IEtleWJvYXJkQ29udHJvbHMoXCJhcnJvd3NcIiwgMzgsIDM3LCA0MCwgMzksIDMyKTtcclxuICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoa2V5Ym9hcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3T3B0aW9ucyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlcnMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmb250U2l6ZSA9IDIyO1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IDU7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uc0hlaWdodCA9IChmb250U2l6ZSArIG1hcmdpbiAqIDIpICogdGhpcy5vcHRpb25zLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBzdGFydEhlaWdodCA9IGhlaWdodCAvIDIgLSBvcHRpb25zSGVpZ2h0IC8gMjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnNbaV07XHJcblxyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgLy8gc3RhcnQgLyBsZWZ0IC8gY2VudGVyIC8gcmlnaHQgLyBlbmRcclxuICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCIgLy8gYm90dG9tIC8gYWxwaGFiZXRpYyAvIG1pZGRsZSAvIGhhbmdpbmcgLyB0b3BcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSBcIjIycHggc2Fucy1zZXJpZlwiO1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25IZWlnaHQgPSBzdGFydEhlaWdodCArIG1hcmdpbiArIChmb250U2l6ZSArIG1hcmdpbiAqIDIpICogaTtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KG9wdGlvbiwgd2lkdGggLyAyLCBvcHRpb25IZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgPT09IHRoaXMuc2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHdpZHRoIC8gMiAtIGN0eC5tZWFzdXJlVGV4dChvcHRpb24pLndpZHRoIC8gMiAtIG1hcmdpbiwgb3B0aW9uSGVpZ2h0IC0gZm9udFNpemUgLyAyIC0gbWFyZ2luLCBjdHgubWVhc3VyZVRleHQob3B0aW9uKS53aWR0aCArIG1hcmdpbiAqIDIsIGZvbnRTaXplICsgbWFyZ2luICogMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdDb250cm9sbGVycyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcclxuICAgICAgICB2YXIgbWFyZ2luID0gMTU7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXJXaWR0aCA9IDYwO1xyXG4gICAgICAgIHZhciB0b3RhbFdpZHRoID0gbWFyZ2luICsgdGhpcy5jb250cm9sbGVycy5sZW5ndGggKiAoY29udHJvbGxlcldpZHRoICsgbWFyZ2luKVxyXG4gICAgICAgIHZhciBzdGFydFggPSB3aWR0aCAvIDIgLSB0b3RhbFdpZHRoIC8gMlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250cm9sbGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jb250cm9sbGVyc1tpXTtcclxuICAgICAgICAgICAgdmFyIHggPSBzdGFydFggKyBtYXJnaW4gKyAobWFyZ2luICsgY29udHJvbGxlcldpZHRoKSAqIGk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZWxlbWVudC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xsZXJUeXBlLmdhbWVwYWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnNjBweCBGb250QXdlc29tZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdcXHVmMTFiJywgeCwgaGVpZ2h0IC8gNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmZpbGxSZWN0KHgsIGhlaWdodCAvIDQsIDIwLCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xsZXJUeXBlLmtleWJvYXJkOlxyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZWVuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnNjBweCBGb250QXdlc29tZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdcXHVmMTFjJywgeCwgaGVpZ2h0IC8gNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmZpbGxSZWN0KHgsIGhlaWdodCAvIDQsIDIwLCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkQ29udHJvbGxlciA9IChjb250cm9sbGVyOiBDb250cm9sbGVyKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIudHlwZSA9PSBDb250cm9sbGVyVHlwZS5nYW1lcGFkKSB7XHJcbiAgICAgICAgICAgICg8R2FtZXBhZENvbnRyb2xzPmNvbnRyb2xsZXIpLmVuYWJsZVNpZ25hbHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udHJvbGxlci5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmNvbnRyb2xsZXJTaWduYWwpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb250cm9sbGVyU2lnbmFsID0gKHNlbmRlcjogQ29udHJvbGxlciwgc2lnbmFsOiBTaWduYWxzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzaWduYWw6IFwiICsgc2lnbmFsKTtcclxuXHJcbiAgICAgICAgaWYgKHNpZ25hbCA9PSBTaWduYWxzLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJzLmluZGV4T2Yoc2VuZGVyKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnNwbGljZSh0aGlzLmNvbnRyb2xsZXJzLmluZGV4T2Yoc2VuZGVyKSwgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnB1c2goc2VuZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250cm9sbGVycy5sZW5ndGggPiAwICYmIHRoaXMuY29udHJvbGxlcnNbMF0gPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc2lnbmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbHMuZG93bjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPj0gdGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbHMudXA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gdGhpcy5vcHRpb25zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxzLmE6XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZFNjYW5uZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbnRyb2xzID0gIXRoaXMuc2hvd0NvbnRyb2xzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCIuL2VuYy92aWV3XCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9lbmMvY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBTbmFrZSB9IGZyb20gXCIuL3NuYWtlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVZpZXcgZXh0ZW5kcyBWaWV3IHtcclxuICAgIHByaXZhdGUgc25ha2VzOiBTbmFrZVtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBmcHNJbnRlcnZhbCA9IDMwMDtcclxuICAgIGxhc3RGcmFtZVRpbWU6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgc3RhcnQoY29udHJvbGxlcnM6IENvbnRyb2xsZXJbXSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udHJvbGxlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IGNvbnRyb2xsZXJzW2ldO1xyXG4gICAgICAgICAgICB2YXIgc25ha2UgPSBuZXcgU25ha2UoMTUwLCAxMDAsIGNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUoc25ha2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNuYWtlcy5wdXNoKHNuYWtlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5hZGRVcGRhdGUoKHRpbWVEaWZmKSA9PiB7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVsYXBzZWQgPiB0aGlzLmZwc0ludGVydmFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBub3c7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNuYWtlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYWtlID0gdGhpcy5zbmFrZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc25ha2UudGljaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBbmltYXRpb24gfSBmcm9tIFwiLi9lbmMvYW5pbWF0aW9uXCI7XHJcbmltcG9ydCB7IE1haW5NZW51VmlldyB9IGZyb20gXCIuL21haW5NZW51Vmlld1wiO1xyXG5pbXBvcnQgeyBHYW1lVmlldyB9IGZyb20gXCIuL2dhbWVWaWV3XCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgICBhbmltYXRpb246IEFuaW1hdGlvbjtcclxuICAgIG1lbnU6IE1haW5NZW51VmlldztcclxuICAgIGdhbWU6IEdhbWVWaWV3O1xyXG5cclxuICAgIHB1YmxpYyBydW4oKSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSBBbmltYXRpb24uY3JlYXRlSW5Cb2R5KCk7XHJcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1haW5NZW51Vmlldyh0aGlzLnN0YXJ0KTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5hZGRWaWV3KHRoaXMubWVudSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5nYW1lID0gbmV3IEdhbWVWaWV3KCk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uYWRkVmlldyh0aGlzLmdhbWUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLm1lbnUuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zaG93KCk7XHJcbiAgICAgICAgdGhpcy5nYW1lLnN0YXJ0KHRoaXMubWVudS5jb250cm9sbGVycyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBtYWluLCBmYWxzZSk7XHJcblxyXG5mdW5jdGlvbiBtYWluKCkge1xyXG4gIGNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuICBhcHAucnVuKCk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9