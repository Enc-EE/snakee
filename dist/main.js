!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){e.exports=n.p+"ea8a77d442cd84a1c20840b411eec697.png"},function(e,t,n){e.exports=n.p+"f6aa7f0421a5ce4cec7cc06690fd335e.png"},function(e,t,n){"use strict";n.r(t);var i,a,s=function(){function e(){var e=this;this.animations=[],this.updates=[],this.resize=function(){console.log("canvas resizing"),e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight},this.isRunning=!1,this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)},this.addView=function(t){e.addAnimatable(t),t.width=e.width,t.height=e.height},this.removeView=function(t){e.removeAnimatable(t)},this.fps=40,this.fpsInterval=1e3/this.fps,this.animate=function(){e.isRunning&&requestAnimationFrame(e.animate);var t=Date.now(),n=t-e.lastFrameTime;if(n>e.fpsInterval){e.lastFrameTime=t;for(var i=n/1e3,a=0,s=e.updates;a<s.length;a++){(0,s[a])(i)}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var o=0,r=e.animations;o<r.length;o++){(0,r[o])(e.ctx,e.canvas.width,e.canvas.height)}}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),e.createInBody=function(){document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var t=document.createElement("canvas");document.body.appendChild(t),t.style.width="100%",t.style.height="100%";var n=new e;return n.canvas=t,n.ctx=t.getContext("2d"),document.addEventListener("keyup",function(e){80==e.keyCode&&n.playPause(),console.log(e.keyCode)}),n.startAnimation(),n.resize(),window.addEventListener("resize",n.resize),n},e.prototype.startAnimation=function(){console.log("start animation"),this.isRunning=!0,this.lastFrameTime=Date.now(),this.animate()},e.prototype.stopAnimation=function(){console.log("stop animation"),this.isRunning=!1},e.prototype.playPause=function(){this.isRunning?this.stopAnimation():this.startAnimation()},e}(),o=function(){return function(){var e=this;this.animations=[],this.updates=[],this.isVisible=!0,this.update=function(t){if(e.isVisible)for(var n=0,i=e.updates;n<i.length;n++)(0,i[n])(t)},this.draw=function(t,n,i){if(e.isVisible)for(var a=0,s=e.animations;a<s.length;a++)(0,s[a])(t,n,i)},this.show=function(){e.isVisible=!0},this.hide=function(){e.isVisible=!1},this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)}}}();!function(e){e.start="start",e.left="left",e.up="up",e.right="right",e.down="down",e.a="a"}(i||(i={})),function(e){e.keyboard="keyboard",e.gamepad="gamepad"}(a||(a={}));var r=function(){return function(){var e=this;this.listeners=[],this.addEventListener=function(t){if(!t||e.listeners.indexOf(t)>=0)throw"listener already added";e.listeners.push(t)},this.dispatchEvent=function(t){for(var n=0;n<e.listeners.length;n++)(0,e.listeners[n])(t)},this.removeEventListener=function(t){if(!t||e.listeners.indexOf(t)<0)throw"listener not found";e.listeners.splice(e.listeners.indexOf(t),1)}}}(),d=function(){return function(){var e=this;this.listeners=[],this.addEventListener=function(t){if(!t||e.listeners.indexOf(t)>=0)throw"listener already added";e.listeners.push(t)},this.dispatchEvent=function(t,n){for(var i=0;i<e.listeners.length;i++)(0,e.listeners[i])(t,n)},this.removeEventListener=function(t){if(!t||e.listeners.indexOf(t)<0)throw"listener not found";e.listeners.splice(e.listeners.indexOf(t),1)}}}(),c=function(){return function(e,t,n,s,o,r){var c=this;this.name=e,this.type=a.keyboard,this.signal=new d,this.xAxes=0,this.yAxes=0,this.start=!1,document.addEventListener("keydown",function(e){e.keyCode==n&&(c.xAxes=-1,c.signal.dispatchEvent(c,i.left)),e.keyCode==t&&(c.yAxes=-1,c.signal.dispatchEvent(c,i.up)),e.keyCode==o&&(c.xAxes=1,c.signal.dispatchEvent(c,i.right)),e.keyCode==s&&(c.yAxes=1,c.signal.dispatchEvent(c,i.down)),13==e.keyCode&&(c.start=!0,c.signal.dispatchEvent(c,i.start)),e.keyCode==r&&(c.a=!0,c.signal.dispatchEvent(c,i.a))}),document.addEventListener("keyup",function(e){e.keyCode==n&&(c.xAxes=-1)&&(c.xAxes=0),e.keyCode==t&&(c.yAxes=-1)&&(c.yAxes=0),e.keyCode==o&&(c.xAxes=1)&&(c.xAxes=0),e.keyCode==s&&(c.yAxes=1)&&(c.yAxes=0),13==e.keyCode&&(c.start=!1),e.keyCode==r&&(c.a=!1)})}}(),l=function(){function e(){var e=this;this.gamepads=[],this.scangamepads=function(){console.log("scanning gamepads");for(var t=navigator.getGamepads?navigator.getGamepads():[],n=0;n<t.length;n++)t[n]&&(console.log("scanned gamepad: "+t[n].index+"/"+t[n].id),!(t[n].index in e.gamepads)&&t[n].buttons.length>=16&&(e.gamepads[t[n].index]=t[n],e.scannedGamepad.dispatchEvent(t[n])))},this.scannedGamepad=new r,this.reset()}return e.prototype.start=function(){this.gamepadScanner=setInterval(this.scangamepads,500)},e.prototype.stop=function(){clearInterval(this.gamepadScanner)},e.prototype.reset=function(){this.gamepads=[]},e}(),u=function(){function e(e,t){var n=this;this.name=e,this.index=t,this.timeout=.5,this.signalingTimers={},this.signalListener=function(){requestAnimationFrame(n.signalListener);var e=Date.now();n.checkSignal(n.start,i.start,e),n.checkSignal(n.a,i.a,e),n.checkSignal(n.yAxes<-.3,i.up,e),n.checkSignal(n.yAxes>.3,i.down,e),n.checkSignal(n.xAxes<-.3,i.left,e),n.checkSignal(n.xAxes>.3,i.right,e)},this.checkSignal=function(e,t,i){e?n.signalingTimers[t]?(i-n.signalingTimers[t])/1e3>=n.timeout&&n.signal.dispatchEvent(n,t):(n.signalingTimers[t]=Date.now(),n.signal.dispatchEvent(n,t)):n.signalingTimers[t]=void 0},this.signal=new d,this.type=a.gamepad}return Object.defineProperty(e.prototype,"xAxes",{get:function(){return navigator.getGamepads()[this.index].axes[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxes",{get:function(){return navigator.getGamepads()[this.index].axes[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return navigator.getGamepads()[this.index].buttons[9].pressed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return navigator.getGamepads()[this.index].buttons[0].pressed},enumerable:!0,configurable:!0}),e.prototype.enableSignals=function(){this.signalListener()},e}(),p=n(0),h=n.n(p),f=n(1),g=n.n(f),m=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),y=function(e){function t(){var t=e.call(this)||this;t.options=[],t.controllers=[],t.drawOptions=function(e,n,i){if(!(t.controllers.length<=0))for(var a=i/2-32*t.options.length/2,s=0;s<t.options.length;s++){var o=t.options[s];e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="22px sans-serif";var r=a+5+32*s;e.fillText(o,n/2,r),s===t.selectedOption&&e.strokeRect(n/2-e.measureText(o).width/2-5,r-11-5,e.measureText(o).width+10,32)}},t.drawControllers=function(e,n,i){for(var s=n/2-(15+75*t.controllers.length)/2,o=0;o<t.controllers.length;o++){var r=s+15+75*o;switch(t.controllers[o].type){case a.gamepad:e.fillStyle="red",e.font="60px FontAwesome",e.fillText("",r,i/4);break;case a.keyboard:e.fillStyle="green",e.font="60px FontAwesome",e.fillText("",r,i/4)}}},t.addController=function(e){e.type==a.gamepad&&e.enableSignals(),e.signal.addEventListener(t.controllerSignal)},t.controllerSignal=function(e,n){if(console.log("signal: "+n),n==i.start)t.controllers.indexOf(e)>=0?t.controllers.splice(t.controllers.indexOf(e),1):t.controllers.push(e);else if(t.controllers.length>0&&t.controllers[0]==e)switch(n){case i.down:t.selectedOption++,t.selectedOption>=t.options.length&&(t.selectedOption=0);break;case i.up:t.selectedOption--,t.selectedOption<0&&(t.selectedOption=t.options.length-1);break;case i.a:switch(t.selectedOption){case 0:break;case 1:t.showControls=!t.showControls}}},t.options=["Start Game","Show / Hide Controls"],t.selectedOption=0,t.showControls=!0,t.controls_gamepad_image=new Image,t.controls_gamepad_image.src=h.a,t.controls_keyboard_image=new Image,t.controls_keyboard_image.src=g.a,t.addAnimation(function(e,n,i){if(t.showControls){var a=n/3,s=a/t.controls_gamepad_image.naturalWidth*t.controls_gamepad_image.naturalHeight;e.drawImage(t.controls_gamepad_image,a-a/2,3*i/4-s/2,a,s),s=a/t.controls_keyboard_image.naturalWidth*t.controls_keyboard_image.naturalHeight,e.drawImage(t.controls_keyboard_image,2*a-a/2,3*i/4-s/2,a,s)}}),t.addAnimation(t.drawOptions),t.addAnimation(t.drawControllers);var n=new l;n.scannedGamepad.addEventListener(function(e){t.addController(new u(e.index.toString(),e.index))}),n.start();var s=new c("arrows",38,37,40,39,32);return t.addController(s),t}return m(t,e),t}(o),v=function(){function e(){}return e.prototype.run=function(){this.animation=s.createInBody();var e=new y;this.animation.addView(e)},e}();document.addEventListener("DOMContentLoaded",function(){(new v).run()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9jb250cm9sc19nYW1lcGFkLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2NvbnRyb2xzX2tleWJvYXJkLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2FuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9lbmMvZUV2ZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9lbmMva2V5Ym9hcmRDb250cm9scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5jL2dhbWVwYWRTY2FubmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9lbmMvZ2FtZXBhZENvbnRyb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluTWVudVZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJTaWduYWxzIiwiQ29udHJvbGxlclR5cGUiLCJBbmltYXRpb24iLCJfdGhpcyIsInRoaXMiLCJhbmltYXRpb25zIiwidXBkYXRlcyIsInJlc2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJjYW52YXMiLCJ3aWR0aCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiaXNSdW5uaW5nIiwiYWRkQW5pbWF0aW9uIiwiZnVuYyIsInB1c2giLCJyZW1vdmVBbmltYXRpb24iLCJzcGxpY2UiLCJpbmRleE9mIiwiYWRkVXBkYXRlIiwicmVtb3ZlVXBkYXRlIiwiYWRkQW5pbWF0YWJsZSIsImFuaW1hdGFibGUiLCJ1cGRhdGUiLCJkcmF3IiwicmVtb3ZlQW5pbWF0YWJsZSIsImFkZFZpZXciLCJ2aWV3IiwicmVtb3ZlVmlldyIsImZwcyIsImZwc0ludGVydmFsIiwiYW5pbWF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm5vdyIsIkRhdGUiLCJlbGFwc2VkIiwibGFzdEZyYW1lVGltZSIsInRpbWVEaWZmIiwiX2kiLCJfYSIsImxlbmd0aCIsImN0eCIsImNsZWFyUmVjdCIsIl9iIiwiX2MiLCJjcmVhdGVJbkJvZHkiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJvdmVyZmxvdyIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImFuaW1hdGlvbiIsImdldENvbnRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXlDb2RlIiwicGxheVBhdXNlIiwic3RhcnRBbmltYXRpb24iLCJ3aW5kb3ciLCJzdG9wQW5pbWF0aW9uIiwiVmlldyIsImlzVmlzaWJsZSIsInNob3ciLCJoaWRlIiwiRUV2ZW50VCIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsImFyZyIsImV2ZW50XzEiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiRUV2ZW50VFQiLCJhcmcxIiwiYXJnMiIsImV2ZW50XzIiLCJrZXlib2FyZENvbnRyb2xzX0tleWJvYXJkQ29udHJvbHMiLCJ1cEtleSIsImxlZnRLZXkiLCJkb3duS2V5IiwicmlnaHRLZXkiLCJhIiwidHlwZSIsImtleWJvYXJkIiwic2lnbmFsIiwieEF4ZXMiLCJ5QXhlcyIsInN0YXJ0IiwibGVmdCIsInVwIiwicmlnaHQiLCJkb3duIiwiZ2FtZXBhZFNjYW5uZXJfR2FtZXBhZFNjYW5uZXIiLCJHYW1lcGFkU2Nhbm5lciIsImdhbWVwYWRzIiwic2NhbmdhbWVwYWRzIiwibmF2aWdhdG9yIiwiZ2V0R2FtZXBhZHMiLCJpbmRleCIsImlkIiwiYnV0dG9ucyIsInNjYW5uZWRHYW1lcGFkIiwicmVzZXQiLCJnYW1lcGFkU2Nhbm5lciIsInNldEludGVydmFsIiwic3RvcCIsImNsZWFySW50ZXJ2YWwiLCJnYW1lcGFkQ29udHJvbHNfR2FtZXBhZENvbnRyb2xzIiwiR2FtZXBhZENvbnRyb2xzIiwidGltZW91dCIsInNpZ25hbGluZ1RpbWVycyIsInNpZ25hbExpc3RlbmVyIiwiY2hlY2tTaWduYWwiLCJpc1ByZXNzZWQiLCJ1bmRlZmluZWQiLCJnYW1lcGFkIiwiYXhlcyIsInByZXNzZWQiLCJlbmFibGVTaWduYWxzIiwibWFpbk1lbnVWaWV3X01haW5NZW51VmlldyIsIl9zdXBlciIsIk1haW5NZW51VmlldyIsIm9wdGlvbnMiLCJjb250cm9sbGVycyIsImRyYXdPcHRpb25zIiwic3RhcnRIZWlnaHQiLCJvcHRpb24iLCJmaWxsU3R5bGUiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmb250Iiwib3B0aW9uSGVpZ2h0IiwiZmlsbFRleHQiLCJzZWxlY3RlZE9wdGlvbiIsInN0cm9rZVJlY3QiLCJtZWFzdXJlVGV4dCIsImZvbnRTaXplIiwiZHJhd0NvbnRyb2xsZXJzIiwic3RhcnRYIiwieCIsImFkZENvbnRyb2xsZXIiLCJjb250cm9sbGVyIiwiY29udHJvbGxlclNpZ25hbCIsInNlbmRlciIsInNob3dDb250cm9scyIsImNvbnRyb2xzX2dhbWVwYWRfaW1hZ2UiLCJJbWFnZSIsInNyYyIsImNvbnRyb2xzX2dhbWVwYWRfZGVmYXVsdCIsImNvbnRyb2xzX2tleWJvYXJkX2ltYWdlIiwiY29udHJvbHNfa2V5Ym9hcmRfZGVmYXVsdCIsIm5ld1dpZHRoIiwibmV3SGVpZ2h0IiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsImRyYXdJbWFnZSIsInRvU3RyaW5nIiwiX19leHRlbmRzIiwiYXBwX0FwcCIsIkFwcCIsInJ1biIsIm1haW5NZW51Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFV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QUlsQyxFQUFpQixJQUFJWCxFQUN6QlcsRUFBZUYsZUFBZS9DLGlCQUFpQixTQUFDNkQsR0FDNUNySCxFQUFLOEksY0FBYyxJQUFJakMsRUFBZ0JRLEVBQVFqQixNQUFNMEQsV0FBWXpDLEVBQVFqQixVQUU3RUssRUFBZWhCLFFBRWYsSUFBSUosRUFBVyxJQUFJUCxFQUFpQixTQUFVLEdBQUksR0FBSSxHQUFJLEdBQUksV0FDOUQ5RSxFQUFLOEksY0FBY3pELEtBaUczQixPQXpJa0MwRSxFQUFBcEMsRUFBQUQsR0F5SWxDQyxFQXpJQSxDQUFrQzVELEdDRmxDaUcsRUFBQSxvQkFBQUMsS0FzQkEsT0FqQldBLEVBQUF4SyxVQUFBeUssSUFBUCxXQUNJakssS0FBS3FELFVBQVl2RCxFQUFVOEMsZUFDM0IsSUFBSXNILEVBQVcsSUFBSTFDLEVBQ25CeEgsS0FBS3FELFVBQVU1QixRQUFReUksSUFjL0JGLEVBdEJBLEdDSkFuSCxTQUFTVSxpQkFBaUIsbUJBRTFCLFlBQ2MsSUFBSXdHLEdBQ1pFLFFBSjhDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJlYThhNzdkNDQyY2Q4NGExYzIwODQwYjQxMWVlYzY5Ny5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmNmFhN2YwNDIxYTVjZTRjZWM3Y2MwNjY5MGZkMzM1ZS5wbmdcIjsiLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIi4vdmlld1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgQW5pbWF0aW9uRnVuY3Rpb24gPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIFVwZGF0ZUZ1bmN0aW9uID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFuaW1hdGFibGUge1xyXG4gICAgdXBkYXRlOiBVcGRhdGVGdW5jdGlvbjtcclxuICAgIGRyYXc6IEFuaW1hdGlvbkZ1bmN0aW9uO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uIHtcclxuICAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIGFuaW1hdGlvbnM6IEFuaW1hdGlvbkZ1bmN0aW9uW10gPSBbXTtcclxuICAgIHByaXZhdGUgdXBkYXRlczogVXBkYXRlRnVuY3Rpb25bXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVJbkJvZHkoKTogQW5pbWF0aW9uIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG5cclxuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG4gICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXHJcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbigpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5jYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgYW5pbWF0aW9uLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSA4MCkgeyAvLyBzcGFjZVxyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnBsYXlQYXVzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmtleUNvZGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbmltYXRpb24uc3RhcnRBbmltYXRpb24oKTtcclxuICAgICAgICBhbmltYXRpb24ucmVzaXplKCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgYW5pbWF0aW9uLnJlc2l6ZSk7XHJcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzaXplID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2FudmFzIHJlc2l6aW5nXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuY2FudmFzLmNsaWVudEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRBbmltYXRpb24oKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzdGFydCBhbmltYXRpb25cIik7XHJcblxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgc3RvcEFuaW1hdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInN0b3AgYW5pbWF0aW9uXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHBsYXlQYXVzZSgpIHtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA/IHRoaXMuc3RvcEFuaW1hdGlvbigpIDogdGhpcy5zdGFydEFuaW1hdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChmdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0aW9uID0gKGZ1bmM6IEFuaW1hdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnNwbGljZSh0aGlzLmFuaW1hdGlvbnMuaW5kZXhPZihmdW5jKSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVVcGRhdGUgPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMuc3BsaWNlKHRoaXMudXBkYXRlcy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goYW5pbWF0YWJsZS51cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGFibGUuZHJhdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUFuaW1hdGFibGUgPSAoYW5pbWF0YWJsZTogQW5pbWF0YWJsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoYW5pbWF0YWJsZS51cGRhdGUpLCAxKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGFuaW1hdGFibGUuZHJhdyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRWaWV3ID0gKHZpZXc6IFZpZXcpID0+IHtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUodmlldyk7XHJcbiAgICAgICAgdmlldy53aWR0aCA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdmlldy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlVmlldyA9ICh2aWV3OiBWaWV3KSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbmltYXRhYmxlKHZpZXcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGFzdEZyYW1lVGltZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmcHMgPSA0MDtcclxuICAgIHByaXZhdGUgZnBzSW50ZXJ2YWwgPSAxMDAwIC8gdGhpcy5mcHM7XHJcblxyXG4gICAgcHJpdmF0ZSBhbmltYXRlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lO1xyXG5cclxuICAgICAgICBpZiAoZWxhcHNlZCA+IHRoaXMuZnBzSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gbm93O1xyXG4gICAgICAgICAgICB2YXIgdGltZURpZmYgPSBlbGFwc2VkIC8gMTAwMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHRoaXMudXBkYXRlcykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlKHRpbWVEaWZmKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBhbmltYXRlIG9mIHRoaXMuYW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSh0aGlzLmN0eCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBFRXZlbnRUVCB9IGZyb20gXCIuL2VFdmVudFwiO1xyXG5cclxuZXhwb3J0IGVudW0gU2lnbmFscyB7XHJcbiAgICBzdGFydCA9IFwic3RhcnRcIixcclxuICAgIGxlZnQgPSBcImxlZnRcIixcclxuICAgIHVwID0gXCJ1cFwiLFxyXG4gICAgcmlnaHQgPSBcInJpZ2h0XCIsXHJcbiAgICBkb3duID0gXCJkb3duXCIsXHJcbiAgICBhID0gXCJhXCJcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQ29udHJvbGxlclR5cGUge1xyXG4gICAga2V5Ym9hcmQgPSBcImtleWJvYXJkXCIsXHJcbiAgICBnYW1lcGFkID0gXCJnYW1lcGFkXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb250cm9sbGVyIHtcclxuICAgIHhBeGVzOiBudW1iZXI7XHJcbiAgICB5QXhlczogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIHN0YXJ0OiBib29sZWFuO1xyXG4gICAgYTogYm9vbGVhbjtcclxuXHJcbiAgICBzaWduYWw6IEVFdmVudFRUPENvbnRyb2xsZXIsIHN0cmluZz47XHJcbiAgICB0eXBlOiBDb250cm9sbGVyVHlwZVxyXG59IiwiaW1wb3J0IHsgQW5pbWF0aW9uRnVuY3Rpb24sIFVwZGF0ZUZ1bmN0aW9uLCBBbmltYXRhYmxlLCBBbmltYXRpb24gfSBmcm9tIFwiLi9hbmltYXRpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3IGltcGxlbWVudHMgQW5pbWF0YWJsZSB7XHJcbiAgICBwdWJsaWMgYW5pbWF0aW9uczogQW5pbWF0aW9uRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHVibGljIHVwZGF0ZXM6IFVwZGF0ZUZ1bmN0aW9uW10gPSBbXTtcclxuICAgIHByaXZhdGUgaXNWaXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdGhpcy51cGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUodGltZURpZmYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGRyYXcgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhbmltYXRlIG9mIHRoaXMuYW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZShjdHgsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGlkZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChmdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0aW9uID0gKGZ1bmM6IEFuaW1hdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnNwbGljZSh0aGlzLmFuaW1hdGlvbnMuaW5kZXhPZihmdW5jKSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVVcGRhdGUgPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMuc3BsaWNlKHRoaXMudXBkYXRlcy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goYW5pbWF0YWJsZS51cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGFibGUuZHJhdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUFuaW1hdGFibGUgPSAoYW5pbWF0YWJsZTogQW5pbWF0YWJsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoYW5pbWF0YWJsZS51cGRhdGUpLCAxKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGFuaW1hdGFibGUuZHJhdyksIDEpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEVFdmVudFQ8VD4ge1xyXG4gICAgcHJpdmF0ZSBsaXN0ZW5lcnM6ICgoYXJnOiBUKSA9PiB2b2lkKVtdID0gW107XHJcblxyXG4gICAgcHVibGljIGFkZEV2ZW50TGlzdGVuZXIgPSAobGlzdGVuZXI6IChhcmc6IFQpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAvLyB2YWxpZGF0aW9uXHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwibGlzdGVuZXIgYWxyZWFkeSBhZGRlZFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3BhdGNoRXZlbnQgPSAoYXJnOiBUKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHRoaXMubGlzdGVuZXJzW2ldO1xyXG4gICAgICAgICAgICBldmVudChhcmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzogVCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIC8vIHZhbGlkYXRpb25cclxuICAgICAgICBpZiAoIWxpc3RlbmVyIHx8IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpIDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIG5vdCBmb3VuZFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVFdmVudFRUPFQxLCBUMj4ge1xyXG4gICAgcHJpdmF0ZSBsaXN0ZW5lcnM6ICgoYXJnMTogVDEsIGFyZzI6IFQyKSA9PiB2b2lkKVtdID0gW107XHJcblxyXG4gICAgcHVibGljIGFkZEV2ZW50TGlzdGVuZXIgPSAobGlzdGVuZXI6IChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAvLyB2YWxpZGF0aW9uXHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwibGlzdGVuZXIgYWxyZWFkeSBhZGRlZFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3BhdGNoRXZlbnQgPSAoYXJnMTogVDEsIGFyZzI6IFQyKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHRoaXMubGlzdGVuZXJzW2ldO1xyXG4gICAgICAgICAgICBldmVudChhcmcxLCBhcmcyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSAobGlzdGVuZXI6IChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAvLyB2YWxpZGF0aW9uXHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA8IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBub3QgZm91bmRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZSh0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSwgMSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb250cm9sbGVyLCBTaWduYWxzLCBDb250cm9sbGVyVHlwZSB9IGZyb20gXCIuL2NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgRUV2ZW50VFQgfSBmcm9tIFwiLi9lRXZlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBLZXlib2FyZENvbnRyb2xzIGltcGxlbWVudHMgQ29udHJvbGxlciB7XHJcbiAgICB0eXBlOiBDb250cm9sbGVyVHlwZTtcclxuICAgIHNpZ25hbDogRUV2ZW50VFQ8Q29udHJvbGxlciwgc3RyaW5nPjtcclxuICAgIHB1YmxpYyBhOiBib29sZWFuO1xyXG4gICAgcHVibGljIHhBeGVzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeUF4ZXM6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgc3RhcnQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgdXBLZXk6IG51bWJlciwgbGVmdEtleTogbnVtYmVyLCBkb3duS2V5OiBudW1iZXIsIHJpZ2h0S2V5OiBudW1iZXIsIGE6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IENvbnRyb2xsZXJUeXBlLmtleWJvYXJkO1xyXG4gICAgICAgIHRoaXMuc2lnbmFsID0gbmV3IEVFdmVudFRUPENvbnRyb2xsZXIsIHN0cmluZz4oKTtcclxuICAgICAgICB0aGlzLnhBeGVzID0gMDtcclxuICAgICAgICB0aGlzLnlBeGVzID0gMDtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gbGVmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54QXhlcyA9IC0xXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIFNpZ25hbHMubGVmdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gdXBLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAtMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgU2lnbmFscy51cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gcmlnaHRLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueEF4ZXMgPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBTaWduYWxzLnJpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBkb3duS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnlBeGVzID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgU2lnbmFscy5kb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIFNpZ25hbHMuc3RhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KHRoaXMsIFNpZ25hbHMuYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gbGVmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueEF4ZXMgPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueEF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHVwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy55QXhlcyA9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gcmlnaHRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnhBeGVzID0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueEF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGRvd25LZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnlBeGVzID0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEVFdmVudFQgfSBmcm9tIFwiLi9lRXZlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lcGFkU2Nhbm5lciB7XHJcbiAgICBwcml2YXRlIGdhbWVwYWRTY2FubmVyOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGdhbWVwYWRzOiBHYW1lcGFkW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnNjYW5uZWRHYW1lcGFkID0gbmV3IEVFdmVudFQ8R2FtZXBhZD4oKTtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZXBhZFNjYW5uZXIgPSBzZXRJbnRlcnZhbCh0aGlzLnNjYW5nYW1lcGFkcywgNTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcCgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZ2FtZXBhZFNjYW5uZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmdhbWVwYWRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzY2FuZ2FtZXBhZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzY2FubmluZyBnYW1lcGFkc1wiKTtcclxuXHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzID8gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCkgOiBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbWVwYWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lcGFkc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzY2FubmVkIGdhbWVwYWQ6IFwiICsgZ2FtZXBhZHNbaV0uaW5kZXggKyBcIi9cIiArIGdhbWVwYWRzW2ldLmlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghKGdhbWVwYWRzW2ldLmluZGV4IGluIHRoaXMuZ2FtZXBhZHMpICYmIGdhbWVwYWRzW2ldLmJ1dHRvbnMubGVuZ3RoID49IDE2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lcGFkc1tnYW1lcGFkc1tpXS5pbmRleF0gPSBnYW1lcGFkc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjYW5uZWRHYW1lcGFkLmRpc3BhdGNoRXZlbnQoZ2FtZXBhZHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY2FubmVkR2FtZXBhZDogRUV2ZW50VDxHYW1lcGFkPjtcclxufSIsImltcG9ydCB7IENvbnRyb2xsZXIsIENvbnRyb2xsZXJUeXBlLCBTaWduYWxzIH0gZnJvbSBcIi4vY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBFRXZlbnRUVCB9IGZyb20gXCIuL2VFdmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVwYWRDb250cm9scyBpbXBsZW1lbnRzIENvbnRyb2xsZXIge1xyXG4gICAgc2lnbmFsOiBFRXZlbnRUVDxDb250cm9sbGVyLCBzdHJpbmc+O1xyXG4gICAgdHlwZTogQ29udHJvbGxlclR5cGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHJpdmF0ZSBpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zaWduYWwgPSBuZXcgRUV2ZW50VFQ8Q29udHJvbGxlciwgc3RyaW5nPigpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IENvbnRyb2xsZXJUeXBlLmdhbWVwYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB4QXhlcygpOiBudW1iZXIge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5heGVzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgeUF4ZXMoKTogbnVtYmVyIHtcclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcclxuICAgICAgICB2YXIgZ3AgPSBnYW1lcGFkc1t0aGlzLmluZGV4XTtcclxuICAgICAgICByZXR1cm4gZ3AuYXhlc1sxXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHN0YXJ0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5idXR0b25zWzldLnByZXNzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBhKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5idXR0b25zWzBdLnByZXNzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuYWJsZVNpZ25hbHMoKSB7XHJcbiAgICAgICAgdGhpcy5zaWduYWxMaXN0ZW5lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdGltZW91dCA9IDAuNTtcclxuICAgIHByaXZhdGUgc2lnbmFsaW5nVGltZXJzOiB7IFtpZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuXHJcbiAgICBwcml2YXRlIHNpZ25hbExpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnNpZ25hbExpc3RlbmVyKTtcclxuXHJcbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy5zdGFydCwgU2lnbmFscy5zdGFydCwgbm93KTtcclxuICAgICAgICB0aGlzLmNoZWNrU2lnbmFsKHRoaXMuYSwgU2lnbmFscy5hLCBub3cpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy55QXhlcyA8IC0wLjMsIFNpZ25hbHMudXAsIG5vdyk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NpZ25hbCh0aGlzLnlBeGVzID4gMC4zLCBTaWduYWxzLmRvd24sIG5vdyk7XHJcbiAgICAgICAgdGhpcy5jaGVja1NpZ25hbCh0aGlzLnhBeGVzIDwgLTAuMywgU2lnbmFscy5sZWZ0LCBub3cpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTaWduYWwodGhpcy54QXhlcyA+IDAuMywgU2lnbmFscy5yaWdodCwgbm93KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrU2lnbmFsID0gKGlzUHJlc3NlZDogYm9vbGVhbiwgc2lnbmFsOiBTaWduYWxzLCBub3c6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmIChpc1ByZXNzZWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNpZ25hbGluZ1RpbWVyc1tzaWduYWxdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1RpbWVyc1tzaWduYWxdID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQodGhpcywgc2lnbmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgobm93IC0gdGhpcy5zaWduYWxpbmdUaW1lcnNbc2lnbmFsXSkgLyAxMDAwID49IHRoaXMudGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh0aGlzLCBzaWduYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1RpbWVyc1tzaWduYWxdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi9lbmMvdmlld1wiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyLCBTaWduYWxzLCBDb250cm9sbGVyVHlwZSB9IGZyb20gXCIuL2VuYy9jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEtleWJvYXJkQ29udHJvbHMgfSBmcm9tIFwiLi9lbmMva2V5Ym9hcmRDb250cm9sc1wiO1xyXG5pbXBvcnQgeyBHYW1lcGFkU2Nhbm5lciB9IGZyb20gXCIuL2VuYy9nYW1lcGFkU2Nhbm5lclwiO1xyXG5pbXBvcnQgeyBHYW1lcGFkQ29udHJvbHMgfSBmcm9tIFwiLi9lbmMvZ2FtZXBhZENvbnRyb2xzXCI7XHJcbmltcG9ydCBjb250cm9sc19nYW1lcGFkIGZyb20gXCIuL2Fzc2V0cy9jb250cm9sc19nYW1lcGFkLnBuZ1wiO1xyXG5pbXBvcnQgY29udHJvbHNfa2V5Ym9hcmQgZnJvbSBcIi4vYXNzZXRzL2NvbnRyb2xzX2tleWJvYXJkLnBuZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1haW5NZW51VmlldyBleHRlbmRzIFZpZXcge1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZE9wdGlvbjogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBvcHRpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBjb250cm9sbGVyczogQ29udHJvbGxlcltdID0gW107XHJcbiAgICBjb250cm9sc19nYW1lcGFkX2ltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29udHJvbHNfa2V5Ym9hcmRfaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29udHJvbHM6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXCJTdGFydCBHYW1lXCIsIFwiU2hvdyAvIEhpZGUgQ29udHJvbHNcIl07XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5zaG93Q29udHJvbHMgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzX2dhbWVwYWRfaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzX2dhbWVwYWRfaW1hZ2Uuc3JjID0gY29udHJvbHNfZ2FtZXBhZDtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzX2tleWJvYXJkX2ltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sc19rZXlib2FyZF9pbWFnZS5zcmMgPSBjb250cm9sc19rZXlib2FyZDtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb24oKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q29udHJvbHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdXaWR0aCA9IHdpZHRoIC8gMztcclxuICAgICAgICAgICAgICAgIGxldCBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIHRoaXMuY29udHJvbHNfZ2FtZXBhZF9pbWFnZS5uYXR1cmFsV2lkdGggKiB0aGlzLmNvbnRyb2xzX2dhbWVwYWRfaW1hZ2UubmF0dXJhbEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5jb250cm9sc19nYW1lcGFkX2ltYWdlLCBuZXdXaWR0aCAtIG5ld1dpZHRoIC8gMiwgaGVpZ2h0ICogMyAvIDQgLSBuZXdIZWlnaHQgLyAyLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gdGhpcy5jb250cm9sc19rZXlib2FyZF9pbWFnZS5uYXR1cmFsV2lkdGggKiB0aGlzLmNvbnRyb2xzX2tleWJvYXJkX2ltYWdlLm5hdHVyYWxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMuY29udHJvbHNfa2V5Ym9hcmRfaW1hZ2UsIG5ld1dpZHRoICogMiAtIG5ld1dpZHRoIC8gMiwgaGVpZ2h0ICogMyAvIDQgLSBuZXdIZWlnaHQgLyAyLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbih0aGlzLmRyYXdPcHRpb25zKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbih0aGlzLmRyYXdDb250cm9sbGVycyk7XHJcblxyXG4gICAgICAgIHZhciBnYW1lcGFkU2Nhbm5lciA9IG5ldyBHYW1lcGFkU2Nhbm5lcigpO1xyXG4gICAgICAgIGdhbWVwYWRTY2FubmVyLnNjYW5uZWRHYW1lcGFkLmFkZEV2ZW50TGlzdGVuZXIoKGdhbWVwYWQ6IEdhbWVwYWQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hZGRDb250cm9sbGVyKG5ldyBHYW1lcGFkQ29udHJvbHMoZ2FtZXBhZC5pbmRleC50b1N0cmluZygpLCBnYW1lcGFkLmluZGV4KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2FtZXBhZFNjYW5uZXIuc3RhcnQoKTtcclxuXHJcbiAgICAgICAgdmFyIGtleWJvYXJkID0gbmV3IEtleWJvYXJkQ29udHJvbHMoXCJhcnJvd3NcIiwgMzgsIDM3LCA0MCwgMzksIDMyKTtcclxuICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoa2V5Ym9hcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3T3B0aW9ucyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlcnMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmb250U2l6ZSA9IDIyO1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IDU7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uc0hlaWdodCA9IChmb250U2l6ZSArIG1hcmdpbiAqIDIpICogdGhpcy5vcHRpb25zLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBzdGFydEhlaWdodCA9IGhlaWdodCAvIDIgLSBvcHRpb25zSGVpZ2h0IC8gMjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnNbaV07XHJcblxyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgLy8gc3RhcnQgLyBsZWZ0IC8gY2VudGVyIC8gcmlnaHQgLyBlbmRcclxuICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCIgLy8gYm90dG9tIC8gYWxwaGFiZXRpYyAvIG1pZGRsZSAvIGhhbmdpbmcgLyB0b3BcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSBcIjIycHggc2Fucy1zZXJpZlwiO1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25IZWlnaHQgPSBzdGFydEhlaWdodCArIG1hcmdpbiArIChmb250U2l6ZSArIG1hcmdpbiAqIDIpICogaTtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KG9wdGlvbiwgd2lkdGggLyAyLCBvcHRpb25IZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgPT09IHRoaXMuc2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHdpZHRoIC8gMiAtIGN0eC5tZWFzdXJlVGV4dChvcHRpb24pLndpZHRoIC8gMiAtIG1hcmdpbiwgb3B0aW9uSGVpZ2h0IC0gZm9udFNpemUgLyAyIC0gbWFyZ2luLCBjdHgubWVhc3VyZVRleHQob3B0aW9uKS53aWR0aCArIG1hcmdpbiAqIDIsIGZvbnRTaXplICsgbWFyZ2luICogMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdDb250cm9sbGVycyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcclxuICAgICAgICB2YXIgbWFyZ2luID0gMTU7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXJXaWR0aCA9IDYwO1xyXG4gICAgICAgIHZhciB0b3RhbFdpZHRoID0gbWFyZ2luICsgdGhpcy5jb250cm9sbGVycy5sZW5ndGggKiAoY29udHJvbGxlcldpZHRoICsgbWFyZ2luKVxyXG4gICAgICAgIHZhciBzdGFydFggPSB3aWR0aCAvIDIgLSB0b3RhbFdpZHRoIC8gMlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250cm9sbGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jb250cm9sbGVyc1tpXTtcclxuICAgICAgICAgICAgdmFyIHggPSBzdGFydFggKyBtYXJnaW4gKyAobWFyZ2luICsgY29udHJvbGxlcldpZHRoKSAqIGk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZWxlbWVudC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xsZXJUeXBlLmdhbWVwYWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnNjBweCBGb250QXdlc29tZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdcXHVmMTFiJywgeCwgaGVpZ2h0IC8gNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmZpbGxSZWN0KHgsIGhlaWdodCAvIDQsIDIwLCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xsZXJUeXBlLmtleWJvYXJkOlxyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZWVuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnNjBweCBGb250QXdlc29tZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdcXHVmMTFjJywgeCwgaGVpZ2h0IC8gNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmZpbGxSZWN0KHgsIGhlaWdodCAvIDQsIDIwLCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkQ29udHJvbGxlciA9IChjb250cm9sbGVyOiBDb250cm9sbGVyKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIudHlwZSA9PSBDb250cm9sbGVyVHlwZS5nYW1lcGFkKSB7XHJcbiAgICAgICAgICAgICg8R2FtZXBhZENvbnRyb2xzPmNvbnRyb2xsZXIpLmVuYWJsZVNpZ25hbHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udHJvbGxlci5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmNvbnRyb2xsZXJTaWduYWwpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb250cm9sbGVyU2lnbmFsID0gKHNlbmRlcjogQ29udHJvbGxlciwgc2lnbmFsOiBTaWduYWxzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzaWduYWw6IFwiICsgc2lnbmFsKTtcclxuXHJcbiAgICAgICAgaWYgKHNpZ25hbCA9PSBTaWduYWxzLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJzLmluZGV4T2Yoc2VuZGVyKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnNwbGljZSh0aGlzLmNvbnRyb2xsZXJzLmluZGV4T2Yoc2VuZGVyKSwgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnB1c2goc2VuZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250cm9sbGVycy5sZW5ndGggPiAwICYmIHRoaXMuY29udHJvbGxlcnNbMF0gPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc2lnbmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbHMuZG93bjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPj0gdGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbHMudXA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gdGhpcy5vcHRpb25zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxzLmE6XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb250cm9scyA9ICF0aGlzLnNob3dDb250cm9scztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCIuL2VuYy9hbmltYXRpb25cIjtcclxuaW1wb3J0IHsgTWVudVZpZXcgfSBmcm9tIFwiLi9ibGFkZS9tZW51Vmlld1wiO1xyXG5pbXBvcnQgeyBHYW1lVmlldyB9IGZyb20gXCIuL2JsYWRlL2dhbWVWaWV3XCI7XHJcbmltcG9ydCB7IE1haW5NZW51VmlldyB9IGZyb20gXCIuL21haW5NZW51Vmlld1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBBcHAge1xyXG4gICAgYW5pbWF0aW9uOiBBbmltYXRpb247XHJcbiAgICBtZW51OiBNZW51VmlldztcclxuICAgIGdhbWU6IEdhbWVWaWV3O1xyXG5cclxuICAgIHB1YmxpYyBydW4oKSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSBBbmltYXRpb24uY3JlYXRlSW5Cb2R5KCk7XHJcbiAgICAgICAgdmFyIG1haW5NZW51ID0gbmV3IE1haW5NZW51VmlldygpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLmFkZFZpZXcobWFpbk1lbnUpO1xyXG4gICAgICAgIC8vIHRoaXMubWVudSA9IG5ldyBNZW51Vmlldyh0aGlzLnN0YXJ0KTtcclxuICAgICAgICAvLyB0aGlzLmdhbWUgPSBuZXcgR2FtZVZpZXcoKTtcclxuICAgICAgICAvLyB0aGlzLmFuaW1hdGlvbi5hZGRWaWV3KHRoaXMubWVudSk7XHJcbiAgICAgICAgLy8gdGhpcy5hbmltYXRpb24uYWRkVmlldyh0aGlzLmdhbWUpO1xyXG4gICAgICAgIC8vIHRoaXMuZ2FtZS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBzdGFydCA9ICgpID0+IHtcclxuICAgIC8vICAgICB0aGlzLm1lbnUuaGlkZSgpO1xyXG4gICAgLy8gICAgIHRoaXMubWVudS51bmxvYWQoKTtcclxuICAgIC8vICAgICB0aGlzLmdhbWUuc2hvdygpO1xyXG4gICAgLy8gICAgIHRoaXMuZ2FtZS5zdGFydCh0aGlzLm1lbnUuY29udHJvbGxlcnMpO1xyXG4gICAgLy8gfVxyXG59IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbiwgZmFsc2UpO1xyXG5cclxuZnVuY3Rpb24gbWFpbigpIHtcclxuICBjb25zdCBhcHAgPSBuZXcgQXBwKCk7XHJcbiAgYXBwLnJ1bigpO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==